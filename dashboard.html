<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - WISE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style type="text/tailwindcss">
        @layer base {
            body {
                font-family: 'Inter', sans-serif;
            }
        }
        @layer utilities {
            /* Custom Scrollbar for better aesthetics */
            ::-webkit-scrollbar {
                width: 8px;
            }
            ::-webkit-scrollbar-track {
                background: #f1f1f1;
                border-radius: 10px;
            }
            ::-webkit-scrollbar-thumb {
                background: #888;
                border-radius: 10px;
            }
            ::-webkit-scrollbar-thumb:hover {
                background: #555;
                border-radius: 10px;
            }
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class', // Mengaktifkan mode gelap berdasarkan kelas 'dark'
            theme: {
                extend: {
                    colors: {
                        wise: {
                            'light-gray': '#FAFAFA', /* Diubah menjadi FAFAFA */
                            'gray': '#6B7280',
                            'dark-gray': '#1F2937',
                            'border': '#E5E7EB',
                            'pink': '#FEE2E2',
                            'brown': '#991B1B',
                            'blue': {
                                500: '#3B82F6',
                            },
                            'teal': {
                                500: '#14B8A6',
                            },
                            'green': {
                                500: '#22C55E',
                            },
                            'purple': {
                                500: '#A855F7',
                            },
                            'orange': {
                                500: '#F97316',
                            },
                            'red': {
                                500: '#EF4444',
                            },
                            'yellow': {
                                500: '#F59E0B',
                            },
                            'indigo': {
                                500: '#6366F1',
                            },
                            'emerald': {
                                500: '#10B981',
                            },
                            // Warna khusus mode gelap
                            'dark-bg': '#1A202C', // Warna latar belakang gelap
                            'dark-card': '#2D3748', // Warna gelap sedikit lebih terang untuk kartu
                            'dark-border': '#4A5568', // Border lebih gelap
                            'dark-text-primary': '#E2E8F0', // Teks terang di latar belakang gelap
                            'dark-text-secondary': '#A0AEC0', // Teks terang sedikit lebih gelap
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="font-inter bg-wise-light-gray dark:bg-wise-dark-bg flex flex-col min-h-screen">
    <header class="bg-white dark:bg-gray-900 border-b border-wise-border dark:border-wise-dark-border px-4 py-3 md:px-6 md:py-4 fixed top-0 left-0 right-0 z-30 shadow-sm">
        <div class="flex items-center justify-between w-full">
            <div class="flex-1 flex justify-start">
                <span class="text-wise-dark-gray dark:text-wise-dark-text-primary text-xl font-bold">WISE</span>
            </div>

            <div class="flex-1 flex justify-center relative">
                <div class="flex items-center bg-white dark:bg-wise-dark-card rounded-xl border border-wise-border dark:border-wise-dark-border overflow-hidden shadow-sm w-full max-w-lg">
                    <input 
                        type="text" 
                        id="search-input"
                        placeholder="Cari sekarang..."
                        class="flex-1 px-4 py-2 focus:outline-none text-sm placeholder-wise-gray dark:placeholder-wise-dark-text-secondary bg-white dark:bg-wise-dark-card text-wise-dark-gray dark:text-wise-dark-text-primary"
                        oninput="handleSearch(this.value)"
                        onfocus="showSearchHistory()"
                    />
                    <button class="bg-wise-dark-gray text-white px-4 py-2 text-sm font-medium hover:bg-gray-700 transition-colors duration-200 rounded-r-xl">
                        Cari
                    </button>
                </div>
                <div id="search-history-dropdown" class="absolute top-full mt-2 w-full max-w-lg bg-white dark:bg-gray-800 rounded-md shadow-lg border border-wise-border dark:border-wise-dark-border hidden z-50">
                    <div class="p-2" id="search-history-content">
                        </div>
                </div>
            </div>

            <div class="flex-1 flex justify-end items-center relative">
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="toggleDarkMode()">
                    <svg id="sun-icon" class="w-5 h-5 text-gray-600 dark:text-gray-300 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.325 6.325l-.707.707M6.325 6.325l-.707-.707m12.728 0l-.707-.707M6.325 17.675l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                    <svg id="moon-icon" class="w-5 h-5 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                    </svg>
                </button>

                <span class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium text-sm md:text-base hidden md:block ml-3">Selamat Datang, <span id="username-display">SuperAdmin</span></span>
                <div class="w-7 h-7 md:w-8 md:h-8 bg-gray-300 dark:bg-gray-700 rounded-full flex items-center justify-center shadow-md cursor-pointer ml-3" onclick="toggleUserDropdown()">
                    <svg class="w-5 h-5 text-gray-600 dark:text-gray-300" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a4 4 0 00-4 4v1a2 2 0 002 2h8a2 2 0 002-2v-1a4 4 0 00-4-4h-4z" clip-rule="evenodd"></path>
                    </svg>
                </div>
                <div id="user-dropdown" class="absolute right-0 top-full mt-2 w-40 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-wise-border dark:border-wise-dark-border hidden z-50">
                    <a href="#" class="block px-4 py-2 text-sm text-wise-dark-gray dark:text-wise-dark-text-primary hover:bg-wise-light-gray dark:hover:bg-gray-700" onclick="navigateToProfile()">Profil</a>
                    <a href="#" class="block px-4 py-2 text-sm text-wise-dark-gray dark:text-wise-dark-text-primary hover:bg-wise-light-gray dark:hover:bg-gray-700" onclick="handleLogout()">Log Out</a>
                </div>
            </div>
        </div>
        <div id="search-filters" class="flex items-center space-x-2 mt-2 ml-20 hidden">
            <span class="text-wise-gray dark:text-wise-dark-text-secondary">Filter:</span>
            <span id="filter-articles" class="bg-wise-light-gray dark:bg-gray-700 text-wise-dark-gray dark:text-wise-dark-text-primary px-2 py-1 rounded-full flex items-center">
                Artikel <button class="ml-1 text-wise-gray dark:text-wise-dark-text-secondary hover:text-wise-dark-gray dark:hover:text-wise-dark-text-primary" onclick="removeFilter('articles')">&times;</button>
            </span>
            <span id="filter-photography" class="bg-wise-light-gray dark:bg-gray-700 text-wise-dark-gray dark:text-wise-dark-text-primary px-2 py-1 rounded-full flex items-center">
                Fotografi <button class="ml-1 text-wise-gray dark:text-wise-dark-text-secondary hover:text-wise-dark-gray dark:hover:text-wise-dark-text-primary" onclick="removeFilter('photography')">&times;</button>
            </span>
            <button class="text-wise-gray dark:text-wise-dark-text-secondary hover:underline" onclick="removeAllFilters()">Hapus semua</button>
        </div>
        <div id="search-results" class="hidden absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-white dark:bg-gray-800 border border-wise-border dark:border-wise-dark-border rounded-xl shadow-xl z-40 max-h-80 overflow-y-auto w-11/12 md:w-1/2">
            <div id="search-results-content" class="p-2">
            </div>
        </div>
    </header>

    <div class="flex flex-1 pt-28 md:pt-24">
        <div id="sidebar" class="w-64 bg-white dark:bg-gray-900 border-r border-wise-border dark:border-wise-dark-border h-screen overflow-y-auto fixed left-0 top-0 z-20 shadow-lg transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out">
            <div class="p-4 pt-20 md:pt-4">
                <div class="space-y-1">
                    <div id="sidebar-dashboard" class="sidebar-item p-3 rounded-lg cursor-pointer hover:bg-wise-light-gray dark:hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-3" onclick="selectCategory('dashboard')">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                            </svg>
                        </div>
                        <span class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium text-sm">Dashboard</span>
                    </div>
                    <div id="dashboard-children" class="ml-9 mt-2 space-y-1 hidden">
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('dashboard-summary')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Ringkasan</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('dashboard-reports')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Laporan</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('dashboard-alerts')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Peringatan</span>
                        </div>
                    </div>
                    
                    <div id="sidebar-yard-management" class="sidebar-item p-3 rounded-lg cursor-pointer hover:bg-wise-light-gray dark:hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-3" onclick="toggleChildren('yard-management')">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m-1 4h1m-1 4h1m-1 4h1m-1 4h1"></path>
                            </svg>
                        </div>
                        <span class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium text-sm">Manajemen Halaman</span>
                        <svg id="yard-management-arrow" class="w-4 h-4 text-wise-gray dark:text-wise-dark-text-secondary transform transition-transform duration-200 rotate-0 ml-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                    <div id="yard-management-children" class="ml-9 mt-2 space-y-1 hidden">
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('yard-vehicles')" onmouseenter="showPreview('yard-vehicles', event)">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Kendaraan</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('yard-equipment')" onmouseenter="showPreview('yard-equipment', event)">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Peralatan</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('yard-personnel')" onmouseenter="showPreview('yard-personnel', event)">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Personel</span>
                        </div>
                    </div>
                    
                    <div id="sidebar-receiving" class="sidebar-item p-3 rounded-lg cursor-pointer hover:bg-wise-light-gray dark:hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-3" onclick="toggleChildren('receiving')">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 4H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-2m-4-1v8m0-8V4m0 4h.01M12 4h.01M16 4h.01M12 12h.01M16 12h.01M12 16h.01M16 16h.01M12 20h.01M16 20h.01M12 20v-8"></path>
                            </svg>
                        </div>
                        <span class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium text-sm">Receiving</span>
                        <svg id="receiving-arrow" class="w-4 h-4 text-wise-gray dark:text-wise-dark-text-secondary transform transition-transform duration-200 rotate-0 ml-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                    <div id="receiving-children" class="ml-9 mt-2 space-y-1 hidden">
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('receiving-deliveries')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Pengiriman</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('receiving-returns')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Pengembalian</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('receiving-vendors')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Vendor</span>
                        </div>
                    </div>
                    
                    <div id="sidebar-order" class="sidebar-item p-3 rounded-lg cursor-pointer hover:bg-wise-light-gray dark:hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-3" onclick="toggleChildren('order')">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                            </svg>
                        </div>
                        <span class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium text-sm">Order Planning</span>
                        <svg id="order-arrow" class="w-4 h-4 text-wise-gray dark:text-wise-dark-text-secondary transform transition-transform duration-200 rotate-0 ml-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                    <div id="order-children" class="ml-9 mt-2 space-y-1 hidden">
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('order-new')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Pesanan Baru</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('order-pending')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Pesanan Tertunda</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('order-history')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Riwayat Pesanan</span>
                        </div>
                    </div>
                    
                    <div id="sidebar-work" class="sidebar-item p-3 rounded-lg cursor-pointer hover:bg-wise-light-gray dark:hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-3" onclick="toggleChildren('work')">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M12 12h.01M16 12h.01"></path>
                            </svg>
                        </div>
                        <span class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium text-sm">Work</span>
                        <svg id="work-arrow" class="w-4 h-4 text-wise-gray dark:text-wise-dark-text-secondary transform transition-transform duration-200 rotate-0 ml-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                    <div id="work-children" class="ml-9 mt-2 space-y-1 hidden">
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('work-tasks')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Tugas</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('work-schedule')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Jadwal</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('work-teams')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Tim</span>
                        </div>
                    </div>
                    
                    <div id="sidebar-cross-application" class="sidebar-item p-3 rounded-lg cursor-pointer hover:bg-wise-light-gray dark:hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-3" onclick="toggleChildren('cross-application')">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <span class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium text-sm">Cross Application</span>
                        <svg id="cross-application-arrow" class="w-4 h-4 text-wise-gray dark:text-wise-dark-text-secondary transform transition-transform duration-200 rotate-0 ml-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                    <div id="cross-application-children" class="ml-9 mt-2 space-y-1 hidden">
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('cross-app-integrations')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Integrasi</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('cross-app-data-sync')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Sinkronisasi Data</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('cross-app-api')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Manajemen API</span>
                        </div>
                    </div>
                    
                    <div id="sidebar-inventory" class="sidebar-item p-3 rounded-lg cursor-pointer hover:bg-wise-light-gray dark:hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-3" onclick="toggleChildren('inventory')">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path>
                            </svg>
                        </div>
                        <span class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium text-sm">Inventaris</span>
                        <svg id="inventory-arrow" class="w-4 h-4 text-wise-gray dark:text-wise-dark-text-secondary transform transition-transform duration-200 rotate-0 ml-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                    <div id="inventory-children" class="ml-9 mt-2 space-y-1 hidden">
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('yard')" onmouseenter="showPreview('yard', event)">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Halaman</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('warehouse')" onmouseenter="showPreview('warehouse', event)">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Gudang</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('storage')" onmouseenter="showPreview('storage', event)">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Penyimpanan</span>
                        </div>
                    </div>
                    
                    <div id="sidebar-performance" class="sidebar-item p-3 rounded-lg cursor-pointer hover:bg-wise-light-gray dark:hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-3" onclick="toggleChildren('performance')">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                        </div>
                        <span class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium text-sm">Manajemen Kinerja</span>
                        <svg id="performance-arrow" class="w-4 h-4 text-wise-gray dark:text-wise-dark-text-secondary transform transition-transform duration-200 rotate-0 ml-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                    <div id="performance-children" class="ml-9 mt-2 space-y-1 hidden">
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('performance-kpis')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">KPI</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('performance-analytics')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Analitik</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('performance-goals')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Sasaran</span>
                        </div>
                    </div>
                    
                    <div id="sidebar-configuration" class="sidebar-item p-3 rounded-lg cursor-pointer hover:bg-wise-light-gray dark:hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-3" onclick="toggleChildren('configuration')">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37a1.724 1.724 0 002.572-1.065z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                        </div>
                        <span class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium text-sm">Configuration</span>
                        <svg id="configuration-arrow" class="w-4 h-4 text-wise-gray dark:text-wise-dark-text-secondary transform transition-transform duration-200 rotate-0 ml-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                    <div id="configuration-children" class="ml-9 mt-2 space-y-1 hidden">
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('configuration-warehouse')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Warehouse</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('configuration-zone')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Zone</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('configuration-location-type')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Location Type</span>
                        </div>
                    </div>
                    
                    <div id="sidebar-system" class="sidebar-item p-3 rounded-lg cursor-pointer hover:bg-wise-light-gray dark:hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-3" onclick="toggleChildren('system')">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-1.25-3H15l3-2V8l-3-2H9L6 8v7l3 2z"></path>
                            </svg>
                        </div>
                        <span class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium text-sm">Manajemen Sistem</span>
                        <svg id="system-arrow" class="w-4 h-4 text-wise-gray dark:text-wise-dark-text-secondary transform transition-transform duration-200 rotate-0 ml-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                    <div id="system-children" class="ml-9 mt-2 space-y-1 hidden">
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('system-users')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Pengguna</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('system-logs')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Log</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('system-backup')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Cadangan</span>
                        </div>
                    </div>
                    
                    <div id="sidebar-archive" class="sidebar-item p-3 rounded-lg cursor-pointer hover:bg-wise-light-gray dark:hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-3" onclick="toggleChildren('archive')">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path>
                            </svg>
                        </div>
                        <span class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium text-sm">Pengarsipan Data</span>
                        <svg id="archive-arrow" class="w-4 h-4 text-wise-gray dark:text-wise-dark-text-secondary transform transition-transform duration-200 rotate-0 ml-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                    <div id="archive-children" class="ml-9 mt-2 space-y-1 hidden">
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('archive-documents')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Dokumen</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('archive-media')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Media</span>
                        </div>
                        <div class="sidebar-child p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200" onclick="selectCategory('archive-financial')">
                            <span class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Keuangan</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="flex-1 ml-0 md:ml-64 p-4 md:p-6 transition-all duration-300 ease-in-out">
            <div id="default-content-area" class="bg-white dark:bg-wise-dark-card rounded-xl border border-wise-border dark:border-wise-dark-border min-h-[500px] shadow-lg p-6 text-wise-dark-gray dark:text-wise-dark-text-primary">
            </div>

            <div id="search-overlay" class="hidden fixed inset-0 bg-white dark:bg-wise-dark-bg bg-opacity-95 z-50 flex items-center justify-center p-4">
                <div class="bg-white dark:bg-wise-dark-card rounded-xl border border-wise-border dark:border-wise-dark-border shadow-lg w-full max-w-3xl h-5/6 flex flex-col">
                    <div class="flex items-center bg-white dark:bg-wise-dark-card rounded-t-xl border-b border-wise-border dark:border-wise-dark-border overflow-hidden p-4">
                        <input 
                            type="text" 
                            id="overlay-search-input"
                            placeholder="Cari sekarang..."
                            class="flex-1 px-4 py-2 focus:outline-none text-sm placeholder-wise-gray dark:placeholder-wise-dark-text-secondary bg-white dark:bg-wise-dark-card text-wise-dark-gray dark:text-wise-dark-text-primary"
                            oninput="performSearch(this.value, 'overlay')"
                        />
                        <button class="bg-wise-dark-gray text-white px-4 py-2 text-sm font-medium hover:bg-gray-700 transition-colors duration-200 rounded-r-xl">
                            Cari
                        </button>
                        <button class="ml-2 text-wise-gray dark:text-wise-dark-text-secondary hover:text-wise-dark-gray dark:hover:text-wise-dark-text-primary" onclick="closeSearchOverlay()">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    <div id="overlay-search-filters" class="flex items-center space-x-2 mt-2 ml-4 text-xs hidden">
                        <span class="text-wise-gray dark:text-wise-dark-text-secondary">Filter:</span>
                        <span id="overlay-filter-articles" class="bg-wise-light-gray dark:bg-gray-700 text-wise-dark-gray dark:text-wise-dark-text-primary px-2 py-1 rounded-full flex items-center">
                            Artikel <button class="ml-1 text-wise-gray dark:text-wise-dark-text-secondary hover:text-wise-dark-gray dark:hover:text-wise-dark-text-primary" onclick="removeOverlayFilter('articles')">&times;</button>
                        </span>
                        <span id="overlay-filter-photography" class="bg-wise-light-gray dark:bg-gray-700 text-wise-dark-gray dark:text-wise-dark-text-primary px-2 py-1 rounded-full flex items-center">
                            Fotografi <button class="ml-1 text-wise-gray dark:text-wise-dark-text-secondary hover:text-wise-dark-gray dark:hover:text-wise-dark-text-primary" onclick="removeOverlayFilter('photography')">&times;</button>
                        </span>
                        <button class="text-wise-gray dark:text-wise-dark-text-secondary hover:underline" onclick="removeAllOverlayFilters()">Hapus semua</button>
                    </div>
                    <div class="flex flex-1 overflow-hidden">
                        <div id="overlay-search-results-list-panel" class="w-1/3 border-r border-wise-border dark:border-wise-dark-border p-4 overflow-y-auto text-wise-dark-gray dark:text-wise-dark-text-primary">
                        </div>
                        <div id="overlay-detail-content-panel" class="flex-1 p-4 overflow-y-auto flex flex-col justify-center items-center text-wise-dark-gray dark:text-wise-dark-text-primary">
                            <p class="text-wise-gray dark:text-wise-dark-text-secondary text-center">Arahkan kursor ke item di sebelah kiri untuk pratinjau, atau klik untuk melihat detail.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Data mock untuk konten dan pencarian
        const contentData = {
            dashboard: {
                full: `
                    <h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Ikhtisar Dashboard</h2>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary mb-4">Selamat datang di dashboard Anda. Berikut ringkasan singkat operasi Anda.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="bg-wise-light-gray dark:bg-gray-800 p-5 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium text-wise-dark-gray dark:text-wise-dark-text-primary mb-2">Total Pemesanan</h3>
                            <p class="text-3xl font-bold text-wise-blue-500">1,250</p>
                            <p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-1">30 hari terakhir</p>
                        </div>
                        <div class="bg-wise-light-gray dark:bg-gray-800 p-5 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium text-wise-dark-gray dark:text-wise-dark-text-primary mb-2">Kru Aktif</h3>
                            <p class="text-3xl font-bold text-wise-teal-500">85</p>
                            <p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-1">Sedang bekerja</p>
                        </div>
                        <div class="bg-wise-light-gray dark:bg-gray-800 p-5 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium text-wise-dark-gray dark:text-wise-dark-text-primary mb-2">Nilai Inventaris</h3>
                            <p class="text-3xl font-bold text-wise-green-500">$2.5M</p>
                            <p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-1">Total aset</p>
                        </div>
                    </div>
                    <div class="mt-8">
                        <h3 class="text-lg md:text-xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-3">Aktivitas Terbaru</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between py-3 px-4 bg-wise-light-gray dark:bg-gray-800 rounded-lg shadow-sm">
                                <h4 class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium">Pemesanan baru untuk Proyek Alpha</h4>
                                <span class="text-wise-gray dark:text-wise-dark-text-secondary text-xs md:text-sm">5 menit yang lalu</span>
                            </div>
                            <div class="flex items-center justify-between py-3 px-4 bg-wise-light-gray dark:bg-gray-800 rounded-lg shadow-sm">
                                <h4 class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium">Kru #123 menyelesaikan tugas</h4>
                                <span class="text-wise-gray dark:text-wise-dark-text-secondary text-xs md:text-sm">1 jam yang lalu</span>
                            </div>
                            <div class="flex items-center justify-between py-3 px-4 bg-wise-light-gray dark:bg-gray-800 rounded-lg shadow-sm">
                                <h4 class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium">Pembaruan inventaris: 10 unit ditambahkan ke Gudang</h4>
                                <span class="text-wise-gray dark:text-wise-dark-text-secondary text-xs md:text-sm">3 jam yang lalu</span>
                            </div>
                        </div>
                    </div>
                `,
            },
            'dashboard-summary': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Ringkasan Dashboard</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Ringkasan singkat metrik dashboard utama.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Data terakhir diperbarui: Sekarang</p>`,
            },
            'dashboard-reports': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Laporan Dashboard</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Laporan kinerja dan aktivitas dashboard terperinci.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Laporan terbaru: Q2 2025</p>`,
            },
            'dashboard-alerts': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Peringatan Dashboard</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Daftar peringatan dan notifikasi penting.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Peringatan aktif: 3</p>`,
            },
            'yard-management': {
                full: `
                    <h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Manajemen Halaman</h2>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary mb-4">Kelola sumber daya dan peralatan halaman Anda di sini. Pilih sub-kategori dari sidebar.</p>
                    <div class="bg-wise-light-gray dark:bg-gray-800 p-4 rounded-lg shadow-sm">
                        <h3 class="font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Ikhtisar</h3>
                        <p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Total Kendaraan: 50, Tersedia: 35</p>
                        <p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Total Peralatan: 120, Tersedia: 80</p>
                    </div>
                `,
            },
            'yard-vehicles': {
                full: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Halaman - Kendaraan (Halaman Lengkap)</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Ini adalah tampilan halaman penuh untuk Kendaraan di Halaman. Berisi daftar lengkap kendaraan, status, dan riwayat.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Detail penuh kendaraan.</p>`,
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Halaman - Kendaraan</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Daftar kendaraan yang tersedia di halaman.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Jumlah: 35 unit</p>`,
            },
            'yard-equipment': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Halaman - Peralatan</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Daftar peralatan yang tersedia di halaman.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Jumlah: 80 unit</p>`,
            },
            'yard-personnel': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Halaman - Personel</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Daftar personel yang ditugaskan ke halaman.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Jumlah: 15 orang</p>`,
            },
            receiving: {
                full: `
                    <h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Manajemen Penerimaan</h2>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary mb-4">Lacak dan kelola semua pengiriman dan kiriman yang masuk. Pilih sub-kategori dari sidebar.</p>
                    <div class="bg-wise-light-gray dark:bg-gray-800 p-4 rounded-lg shadow-sm">
                        <h3 class="font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Penerimaan Tertunda</h3>
                        <ul class="list-disc list-inside text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2 space-y-1">
                            <li>Pengiriman #101 - Diharapkan: Hari Ini</li>
                            <li>Pengiriman #102 - Diharapkan: Besok</li>
                        </ul>
                    </div>
                `,
            },
            'receiving-deliveries': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Penerimaan - Pengiriman</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Detail semua pengiriman yang masuk.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Jumlah pengiriman: 5</p>`,
            },
            'receiving-returns': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Penerimaan - Pengembalian</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Detail semua pengembalian yang diterima.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Jumlah pengembalian: 2</p>`,
            },
            'receiving-vendors': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Penerimaan - Vendor</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Daftar vendor dan status pengiriman mereka.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Jumlah vendor aktif: 10</p>`,
            },
            order: {
                full: `
                    <h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Perencanaan Pesanan</h2>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary mb-4">Rencanakan dan optimalkan pesanan Anda. Lacak status pesanan, kelola pengiriman, dan perkiraan permintaan. Pilih sub-kategori dari sidebar.</p>
                    <div class="bg-wise-light-gray dark:bg-gray-800 p-4 rounded-lg shadow-sm">
                        <h3 class="font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Pesanan Tertunda</h3>
                        <ul class="list-disc list-inside text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2 space-y-1">
                            <li>Pengiriman #X123 - Status: Menunggu Persetujuan</li>
                            <li>Pengiriman #Y456 - Status: Dalam Perjalanan</li>
                        </ul>
                    </div>
                `,
            },
            'order-new': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Perencanaan Pesanan - Pesanan Baru</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Daftar pesanan baru yang perlu diproses.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Pesanan baru: 7</p>`,
            },
            'order-pending': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Perencanaan Pesanan - Pesanan Tertunda</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Daftar pesanan yang sedang dalam proses atau menunggu tindakan.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Pesanan tertunda: 12</p>`,
            },
            'order-history': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Perencanaan Pesanan - Riwayat Pesanan</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Arsip semua pesanan yang telah selesai.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Total pesanan selesai: 500</p>`,
            },
            work: {
                full: `
                    <h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Manajemen Pekerjaan</h2>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary mb-4">Tetapkan tugas, lacak kemajuan, dan kelola tenaga kerja Anda secara efisien. Pilih sub-kategori dari sidebar.</p>
                    <div class="bg-wise-light-gray dark:bg-gray-800 p-4 rounded-lg shadow-sm">
                        <h3 class="font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Ikhtisar</h3>
                        <ul class="list-disc list-inside text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2 space-y-1">
                            <li>Tugas Selesai (Hari Ini): 5</li>
                            <li>Tugas Tertunda: 12</li>
                        </ul>
                    </div>
                `,
            },
            'work-tasks': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Pekerjaan - Tugas</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Daftar tugas yang ditugaskan dan statusnya.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Tugas aktif: 8</p>`,
            },
            'work-schedule': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Pekerjaan - Jadwal</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Jadwal kerja untuk semua tim dan individu.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Jadwal hari ini: Penuh</p>`,
            },
            'work-teams': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Pekerjaan - Tim</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Daftar tim kerja dan anggota mereka.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Jumlah tim: 5</p>`,
            },
            'cross-application': {
                full: `
                    <h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Manajemen Lintas Aplikasi</h2>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary mb-4">Kelola integrasi dan aliran data antar aplikasi yang berbeda. Pilih sub-kategori dari sidebar.</p>
                    <div class="bg-wise-light-gray dark:bg-gray-800 p-4 rounded-lg shadow-sm">
                        <h3 class="font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Sistem Terhubung</h3>
                        <ul class="list-disc list-inside text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2 space-y-1">
                            <li>Sistem CRM (Aktif)</li>
                            <li>Sistem ERP (Aktif)</li>
                        </ul>
                    </div>
                `,
            },
            'cross-app-integrations': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Lintas Aplikasi - Integrasi</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Status dan konfigurasi integrasi aplikasi.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Integrasi aktif: 3</p>`,
            },
            'cross-app-data-sync': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Lintas Aplikasi - Sinkronisasi Data</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Lacak status sinkronisasi data antar sistem.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Sinkronisasi terakhir: 10 menit yang lalu</p>`,
            },
            'cross-app-api': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Lintas Aplikasi - Manajemen API</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Kelola kunci API dan akses untuk integrasi.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Kunci API aktif: 7</p>`,
            },
            inventory: {
                full: `
                    <h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Ikhtisar Inventaris</h2>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary mb-4">Pilih lokasi inventaris dari sidebar untuk melihat detailnya.</p>
                    <div class="bg-wise-light-gray dark:bg-gray-800 p-4 rounded-lg shadow-sm">
                        <h3 class="font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Ringkasan</h3>
                        <p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Total Item di Semua Lokasi: 1,500</p>
                        <p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Tersedia untuk Digunakan: 1,200</p>
                    </div>
                `,
            },
            yard: {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Inventaris - Halaman</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Kelola inventaris yang berlokasi di halaman.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Jumlah item: 150</p>`,
            },
            warehouse: {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Inventaris - Gudang</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Kelola inventaris yang berlokasi di gudang.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Jumlah item: 1000</p>`,
            },
            storage: {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Inventaris - Penyimpanan</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Kelola penyimpanan jangka panjang atau overflow.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Jumlah item: 350</p>`,
            },
            performance: {
                full: `
                    <h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Manajemen Kinerja</h2>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary mb-4">Pantau dan analisis metrik kinerja untuk berbagai operasi dan personel. Pilih sub-kategori dari sidebar.</p>
                    <div class="bg-wise-light-gray dark:bg-gray-800 p-4 rounded-lg shadow-sm">
                        <h3 class="font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Indikator Kinerja Utama (KPI)</h3>
                        <ul class="list-disc list-inside text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2 space-y-1">
                            <li>Tingkat Pengiriman Tepat Waktu: 98%</li>
                            <li>Tingkat Penyelesaian Tugas: 95%</li>
                        </ul>
                    </div>
                `,
            },
            'performance-kpis': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Kinerja - KPI</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Lihat metrik kinerja utama.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">KPI: 5 aktif</p>`,
            },
            'performance-analytics': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Kinerja - Analitik</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Analisis data kinerja terperinci.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Laporan terakhir: Hari ini</p>`,
            },
            'performance-goals': {
                detail: `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Kinerja - Sasaran</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Lacak dan kelola sasaran kinerja.</p><p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Sasaran aktif: 3</p>`,
            },
            
            // Konfigurasi Baru
            configuration: {
                full: `
                    <h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Konfigurasi Sistem</h2>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary mb-4">Di sini Anda dapat mengelola berbagai konfigurasi untuk sistem WISE. Pilih sub-kategori dari sidebar untuk mengelola Warehouse, Zone, atau Location Type.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-wise-light-gray dark:bg-gray-800 p-5 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium text-wise-dark-gray dark:text-wise-dark-text-primary mb-2">Manajemen Gudang</h3>
                            <p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-1">Mengelola detail gudang, termasuk alamat dan pengguna resmi.</p>
                            <button class="mt-4 px-4 py-2 bg-wise-blue-500 text-white rounded-md hover:bg-wise-blue-600 transition-colors duration-200 shadow-md active:scale-95 transform" onclick="selectCategory('configuration-warehouse')">
                                Kelola Gudang
                            </button>
                        </div>
                        <div class="bg-wise-light-gray dark:bg-gray-800 p-5 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium text-wise-dark-gray dark:text-wise-dark-text-primary mb-2">Manajemen Zona</h3>
                            <p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-1">Menentukan dan mengelola berbagai zona dalam gudang.</p>
                            <button class="mt-4 px-4 py-2 bg-wise-blue-500 text-white rounded-md hover:bg-wise-blue-600 transition-colors duration-200 shadow-md active:scale-95 transform" onclick="selectCategory('configuration-zone')">
                                Kelola Zona
                            </button>
                        </div>
                        <div class="bg-wise-light-gray dark:bg-gray-800 p-5 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium text-wise-dark-gray dark:text-wise-dark-text-primary mb-2">Manajemen Tipe Lokasi</h3>
                            <p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-1">Mengonfigurasi tipe lokasi penyimpanan berdasarkan dimensi dan berat.</p>
                            <button class="mt-4 px-4 py-2 bg-wise-blue-500 text-white rounded-md hover:bg-wise-blue-600 transition-colors duration-200 shadow-md active:scale-95 transform" onclick="selectCategory('configuration-location-type')">
                                Kelola Tipe Lokasi
                            </button>
                        </div>
                    </div>
                `,
            },
            'configuration-warehouse': {
                full: `
                    <h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Konfigurasi - Gudang </h2>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary mb-4">Kelola gudang yang ada atau tambahkan yang baru. [cite: 8]</p>
                    <div class="flex justify-between items-center mb-4">
                        <button class="px-4 py-2 bg-wise-green-500 text-white rounded-md hover:bg-wise-green-600 transition-colors duration-200 shadow-md active:scale-95 transform" onclick="showWarehouseForm('create')">
                            Buat Gudang Baru [cite: 9]
                        </button>
                        <input type="text" id="warehouse-search" placeholder="Cari gudang..." class="px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white" oninput="filterWarehouseList(this.value)">
                    </div>
                    <div id="warehouse-list-container" class="overflow-x-auto">
                        </div>
                    <div id="warehouse-form-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden items-center justify-center z-50">
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl">
                            <h3 id="warehouse-form-title" class="text-lg font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4"></h3>
                            <form id="warehouse-form" onsubmit="handleWarehouseSubmit(event)">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                    <div>
                                        <label for="warehouse-name" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Warehouse:</label>
                                        <input type="text" id="warehouse-name" name="warehouse" required class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                    </div>
                                    <div>
                                        <label for="warehouse-description" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Description:</label>
                                        <input type="text" id="warehouse-description" name="description" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <div class="flex space-x-2 mb-2">
                                        <button type="button" class="tab-button px-4 py-2 text-sm font-medium rounded-t-md border-b-2 border-transparent" data-tab="warehouse-address">Warehouse Address</button>
                                        <button type="button" class="tab-button px-4 py-2 text-sm font-medium rounded-t-md border-b-2 border-transparent" data-tab="returns-address">Returns Address</button>
                                        <button type="button" class="tab-button px-4 py-2 text-sm font-medium rounded-t-md border-b-2 border-transparent" data-tab="freight-bill-to-address">Freight Bill to Address</button>
                                        <button type="button" class="tab-button px-4 py-2 text-sm font-medium rounded-t-md border-b-2 border-transparent" data-tab="authorized-users">Authorized Users</button>
                                        <button type="button" class="tab-button px-4 py-2 text-sm font-medium rounded-t-md border-b-2 border-transparent" data-tab="miscellaneous">Miscellaneous</button>
                                        <button type="button" class="tab-button px-4 py-2 text-sm font-medium rounded-t-md border-b-2 border-transparent" data-tab="user-defined-data">User Defined Data</button>
                                    </div>

                                    <div id="warehouse-address" class="tab-content border border-wise-border dark:border-wise-dark-border p-4 rounded-b-md">
                                        <h4 class="font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-2">Warehouse Address</h4>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div>
                                                <label for="address1" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Address 1:</label>
                                                <input type="text" id="address1" name="address1" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="address2" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Address 2 (optional):</label>
                                                <input type="text" id="address2" name="address2" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="address3" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Address 3 (optional):</label>
                                                <input type="text" id="address3" name="address3" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div class="flex space-x-2">
                                                <div class="flex-1">
                                                    <label for="city" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">City, state postal code:</label>
                                                    <input type="text" id="city" name="city" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                                </div>
                                                <div class="w-24">
                                                    <label for="state" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary hidden">State:</label>
                                                    <select id="state" name="state" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                                        <option value="">--Pilih--</option>
                                                        <option value="Jawa Barat">Jawa Barat</option>
                                                        <option value="Jawa Tengah">Jawa Tengah</option>
                                                        <option value="Jawa Timur">Jawa Timur</option>
                                                    </select>
                                                </div>
                                                <div class="flex-1">
                                                    <label for="postal-code" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary hidden">Postal Code:</label>
                                                    <input type="text" id="postal-code" name="postalCode" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                                </div>
                                            </div>
                                            <div>
                                                <label for="country" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Country:</label>
                                                <select id="country" name="country" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                                    <option value="">--Pilih--</option>
                                                    <option value="Indonesia">Indonesia</option>
                                                    <option value="USA">USA</option>
                                                    <option value="Singapore">Singapore</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label for="fax-number" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Fax number:</label>
                                                <input type="text" id="fax-number" name="faxNumber" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="attention-to" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Attention to:</label>
                                                <input type="text" id="attention-to" name="attentionTo" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="phone-number" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Phone number:</label>
                                                <input type="text" id="phone-number" name="phoneNumber" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="email-address" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Email address:</label>
                                                <input type="email" id="email-address" name="emailAddress" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="ucc-ean-number" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">UCC/EAN number:</label>
                                                <input type="text" id="ucc-ean-number" name="uccEanNumber" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                        </div>
                                    </div>
                                    <div id="returns-address" class="tab-content border border-wise-border dark:border-wise-dark-border p-4 rounded-b-md hidden">
                                        <h4 class="font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-2">Returns Address [cite: 10]</h4>
                                        <div class="mb-4">
                                            <label class="inline-flex items-center">
                                                <input type="checkbox" id="same-as-warehouse-address-return" name="sameAsWarehouseAddressReturn" class="form-checkbox h-4 w-4 text-wise-blue-500 rounded border-wise-border dark:border-wise-dark-border focus:ring-wise-blue-500" onclick="toggleReturnAddressFields()">
                                                <span class="ml-2 text-sm text-wise-dark-gray dark:text-wise-dark-text-primary">Same as warehouse address</span>
                                            </label>
                                        </div>
                                        <div id="return-address-fields" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div>
                                                <label for="return-name" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Name:</label>
                                                <input type="text" id="return-name" name="returnName" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="return-address1" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Address 1:</label>
                                                <input type="text" id="return-address1" name="returnAddress1" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="return-address2" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Address 2 (optional):</label>
                                                <input type="text" id="return-address2" name="returnAddress2" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="return-address3" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Address 3 (optional):</label>
                                                <input type="text" id="return-address3" name="returnAddress3" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div class="flex space-x-2">
                                                <div class="flex-1">
                                                    <label for="return-city" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">City, state postal code:</label>
                                                    <input type="text" id="return-city" name="returnCity" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                                </div>
                                                <div class="w-24">
                                                    <label for="return-state" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary hidden">State:</label>
                                                    <select id="return-state" name="returnState" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                                        <option value="">--Pilih--</option>
                                                        <option value="Jawa Barat">Jawa Barat</option>
                                                        <option value="Jawa Tengah">Jawa Tengah</option>
                                                        <option value="Jawa Timur">Jawa Timur</option>
                                                    </select>
                                                </div>
                                                <div class="flex-1">
                                                    <label for="return-postal-code" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary hidden">Postal Code:</label>
                                                    <input type="text" id="return-postal-code" name="returnPostalCode" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                                </div>
                                            </div>
                                            <div>
                                                <label for="return-country" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Country:</label>
                                                <select id="return-country" name="returnCountry" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                                    <option value="">--Pilih--</option>
                                                    <option value="Indonesia">Indonesia</option>
                                                    <option value="USA">USA</option>
                                                    <option value="Singapore">Singapore</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label for="return-fax-number" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Fax number:</label>
                                                <input type="text" id="return-fax-number" name="returnFaxNumber" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="return-attention-to" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Attention to:</label>
                                                <input type="text" id="return-attention-to" name="returnAttentionTo" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="return-phone-number" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Phone number:</label>
                                                <input type="text" id="return-phone-number" name="returnPhoneNumber" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="return-email-address" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Email address:</label>
                                                <input type="email" id="return-email-address" name="returnEmailAddress" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="return-ucc-ean-number" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">UCC/EAN number:</label>
                                                <input type="text" id="return-ucc-ean-number" name="returnUccEanNumber" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                        </div>
                                    </div>
                                    <div id="freight-bill-to-address" class="tab-content border border-wise-border dark:border-wise-dark-border p-4 rounded-b-md hidden">
                                        <h4 class="font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-2">Freight Bill to Address</h4>
                                        <p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Formulir untuk Freight Bill to Address.</p>
                                    </div>
                                    <div id="authorized-users" class="tab-content border border-wise-border dark:border-wise-dark-border p-4 rounded-b-md hidden">
                                        <h4 class="font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-2">Authorized Users [cite: 10]</h4>
                                        <div class="mb-4">
                                            <label class="inline-flex items-center">
                                                <input type="checkbox" id="check-all-users" class="form-checkbox h-4 w-4 text-wise-blue-500 rounded border-wise-border dark:border-wise-dark-border focus:ring-wise-blue-500" onclick="toggleAllUsers()">
                                                <span class="ml-2 text-sm text-wise-dark-gray dark:text-wise-dark-text-primary">Check all</span>
                                            </label>
                                        </div>
                                        <div id="user-checkbox-list" class="grid grid-cols-3 gap-2 max-h-40 overflow-y-auto">
                                            </div>
                                    </div>
                                    <div id="miscellaneous" class="tab-content border border-wise-border dark:border-wise-dark-border p-4 rounded-b-md hidden">
                                        <h4 class="font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-2">Miscellaneous [cite: 10]</h4>
                                        <div class="mb-4">
                                            <label for="slotting-move-file-directory" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Slotting move file download directory:</label>
                                            <input type="text" id="slotting-move-file-directory" name="slottingMoveFileDirectory" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                        </div>
                                        <div class="mb-4">
                                            <label for="default-location-for-unslotted-items" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Default location for unslotted items:</label>
                                            <input type="text" id="default-location-for-unslotted-items" name="defaultLocationForUnslottedItems" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                        </div>
                                        <h5 class="font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mt-4 mb-2">SQL Server Reporting Services</h5>
                                        <div>
                                            <label for="rendered-document-pdf-file-directory" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Rendered document pdf file directory:</label>
                                            <input type="text" id="rendered-document-pdf-file-directory" name="renderedDocumentPdfFileDirectory" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                        </div>
                                    </div>
                                    <div id="user-defined-data" class="tab-content border border-wise-border dark:border-wise-dark-border p-4 rounded-b-md hidden">
                                        <h4 class="font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-2">User defined data [cite: 10]</h4>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div>
                                                <label for="user-defined-field1" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">User defined field 1:</label>
                                                <input type="text" id="user-defined-field1" name="userDefinedField1" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="user-defined-field2" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">User defined field 2:</label>
                                                <input type="text" id="user-defined-field2" name="userDefinedField2" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="user-defined-field3" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">User defined field 3:</label>
                                                <input type="text" id="user-defined-field3" name="userDefinedField3" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="user-defined-field4" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">User defined field 4:</label>
                                                <input type="text" id="user-defined-field4" name="userDefinedField4" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="user-defined-field5" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">User defined field 5:</label>
                                                <input type="text" id="user-defined-field5" name="userDefinedField5" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="user-defined-field6" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">User defined field 6:</label>
                                                <input type="text" id="user-defined-field6" name="userDefinedField6" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="user-defined-field7" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">User defined field 7:</label>
                                                <input type="text" id="user-defined-field7" name="userDefinedField7" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                            <div>
                                                <label for="user-defined-field8" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">User defined field 8:</label>
                                                <input type="text" id="user-defined-field8" name="userDefinedField8" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-4">
                                    <label class="inline-flex items-center">
                                        <input type="checkbox" id="warehouse-inactive" name="inactive" class="form-checkbox h-4 w-4 text-wise-blue-500 rounded border-wise-border dark:border-wise-dark-border focus:ring-wise-blue-500">
                                        <span class="ml-2 text-sm text-wise-dark-gray dark:text-wise-dark-text-primary">Inactive</span>
                                    </label>
                                </div>
                                <div class="flex justify-end space-x-2">
                                    <button type="button" class="px-4 py-2 border border-wise-border dark:border-wise-dark-border rounded-md text-wise-dark-gray dark:text-wise-dark-text-primary hover:bg-wise-light-gray dark:hover:bg-gray-700 transition-colors duration-200" onclick="closeWarehouseForm()">Cancel</button>
                                    <button type="submit" id="warehouse-submit-button" class="px-4 py-2 bg-wise-blue-500 text-white rounded-md hover:bg-wise-blue-600 transition-colors duration-200 shadow-md">OK</button>
                                </div>
                            </form>
                        </div>
                    </div>
                `,
            },
            'configuration-zone': {
                full: `
                    <h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Konfigurasi - Zona [cite: 12]</h2>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary mb-4">Kelola tipe zona untuk berbagai area dalam gudang. [cite: 15]</p>
                    <div class="flex justify-between items-center mb-4">
                        <button class="px-4 py-2 bg-wise-green-500 text-white rounded-md hover:bg-wise-green-600 transition-colors duration-200 shadow-md active:scale-95 transform" onclick="showZoneForm('create')">
                            Buat Zona Baru [cite: 13]
                        </button>
                        <input type="text" id="zone-search" placeholder="Cari zona..." class="px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white" oninput="filterZoneList(this.value)">
                    </div>
                    <div id="zone-list-container" class="overflow-x-auto">
                        </div>

                    <div id="zone-form-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden items-center justify-center z-50">
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg">
                            <h3 id="zone-form-title" class="text-lg font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4"></h3>
                            <form id="zone-form" onsubmit="handleZoneSubmit(event)">
                                <div class="mb-4">
                                    <label for="zone-identifier" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Identifier:</label>
                                    <input type="text" id="zone-identifier" name="identifier" required class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                </div>
                                <div class="mb-4">
                                    <label for="zone-record-type" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Record type:</label>
                                    <input type="text" id="zone-record-type" name="recordType" value="ZONETYPE" readonly class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-gray-100 dark:bg-gray-700 dark:text-wise-dark-text-secondary cursor-not-allowed">
                                </div>
                                <div class="mb-4">
                                    <label for="zone-description" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Description:</label>
                                    <input type="text" id="zone-description" name="description" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                </div>
                                <div class="mb-4">
                                    <label class="inline-flex items-center">
                                        <input type="checkbox" id="zone-inactive" name="inactive" class="form-checkbox h-4 w-4 text-wise-blue-500 rounded border-wise-border dark:border-wise-dark-border focus:ring-wise-blue-500">
                                        <span class="ml-2 text-sm text-wise-dark-gray dark:text-wise-dark-text-primary">Inactive</span>
                                    </label>
                                </div>
                                <div class="mb-4">
                                    <label class="inline-flex items-center">
                                        <input type="checkbox" id="zone-system-created" name="systemCreated" disabled class="form-checkbox h-4 w-4 text-wise-blue-500 rounded border-wise-border dark:border-wise-dark-border focus:ring-wise-blue-500 cursor-not-allowed">
                                        <span class="ml-2 text-sm text-wise-dark-gray dark:text-wise-dark-text-primary">System created</span>
                                    </label>
                                </div>
                                <div class="flex justify-end space-x-2">
                                    <button type="button" class="px-4 py-2 border border-wise-border dark:border-wise-dark-border rounded-md text-wise-dark-gray dark:text-wise-dark-text-primary hover:bg-wise-light-gray dark:hover:bg-gray-700 transition-colors duration-200" onclick="closeZoneForm()">Cancel</button>
                                    <button type="submit" id="zone-submit-button" class="px-4 py-2 bg-wise-blue-500 text-white rounded-md hover:bg-wise-blue-600 transition-colors duration-200 shadow-md">OK</button>
                                </div>
                            </form>
                        </div>
                    </div>
                `,
            },
            'configuration-location-type': {
                full: `
                    <h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Konfigurasi - Tipe Lokasi [cite: 16]</h2>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary mb-4">Konfigurasi tipe lokasi penyimpanan berdasarkan dimensi dan berat. [cite: 18]</p>
                    <div class="flex justify-between items-center mb-4">
                        <button class="px-4 py-2 bg-wise-green-500 text-white rounded-md hover:bg-wise-green-600 transition-colors duration-200 shadow-md active:scale-95 transform" onclick="showLocationTypeForm('create')">
                            Buat Tipe Lokasi Baru
                        </button>
                        <input type="text" id="location-type-search" placeholder="Cari tipe lokasi..." class="px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white" oninput="filterLocationTypeList(this.value)">
                    </div>
                    <div id="location-type-list-container" class="overflow-x-auto">
                        </div>

                    <div id="location-type-form-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden items-center justify-center z-50">
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg">
                            <h3 id="location-type-form-title" class="text-lg font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4"></h3>
                            <form id="location-type-form" onsubmit="handleLocationTypeSubmit(event)">
                                <div class="mb-4">
                                    <label for="location-type-name" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Location type:</label>
                                    <input type="text" id="location-type-name" name="locationType" required class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                </div>
                                <div class="flex space-x-2 mb-2">
                                    <button type="button" class="tab-button px-4 py-2 text-sm font-medium rounded-t-md border-b-2 border-transparent" data-tab="general-location">General</button>
                                    <button type="button" class="tab-button px-4 py-2 text-sm font-medium rounded-t-md border-b-2 border-transparent" data-tab="user-defined-data-location">User defined data</button>
                                </div>
                                <div id="general-location" class="tab-content border border-wise-border dark:border-wise-dark-border p-4 rounded-b-md">
                                    <h4 class="font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-2">General [cite: 17]</h4>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label for="location-type-length" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Length:</label>
                                            <input type="number" step="0.01" id="location-type-length" name="length" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                        </div>
                                        <div>
                                            <label for="location-type-length-um" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">UM:</label>
                                            <input type="text" id="location-type-length-um" name="lengthUM" value="Centimeters" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                        </div>
                                        <div>
                                            <label for="location-type-width" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Width:</label>
                                            <input type="number" step="0.01" id="location-type-width" name="width" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                        </div>
                                        <div>
                                            <label for="location-type-height" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Height:</label>
                                            <input type="number" step="0.01" id="location-type-height" name="height" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                        </div>
                                        <div>
                                            <label for="location-type-maximum-weight" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">Maximum weight:</label>
                                            <input type="number" step="0.01" id="location-type-maximum-weight" name="maximumWeight" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                        </div>
                                        <div>
                                            <label for="location-type-weight-um" class="block text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">UM:</label>
                                            <input type="text" id="location-type-weight-um" name="weightUM" value="Kilograms" class="mt-1 block w-full px-3 py-2 border border-wise-border dark:border-wise-dark-border rounded-md shadow-sm focus:outline-none focus:ring-wise-blue-500 focus:border-wise-blue-500 sm:text-sm bg-white dark:bg-gray-700 dark:text-wise-dark-text-primary">
                                        </div>
                                    </div>
                                </div>
                                <div id="user-defined-data-location" class="tab-content border border-wise-border dark:border-wise-dark-border p-4 rounded-b-md hidden">
                                    <h4 class="font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-2">User Defined Data for Location Type</h4>
                                    <p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm">Tambahkan field kustom untuk tipe lokasi di sini.</p>
                                </div>

                                <div class="mb-4 mt-4">
                                    <label class="inline-flex items-center">
                                        <input type="checkbox" id="location-type-inactive" name="inactive" class="form-checkbox h-4 w-4 text-wise-blue-500 rounded border-wise-border dark:border-wise-dark-border focus:ring-wise-blue-500">
                                        <span class="ml-2 text-sm text-wise-dark-gray dark:text-wise-dark-text-primary">Inactive</span>
                                    </label>
                                </div>
                                <div class="flex justify-end space-x-2">
                                    <button type="button" class="px-4 py-2 border border-wise-border dark:border-wise-dark-border rounded-md text-wise-dark-gray dark:text-wise-dark-text-primary hover:bg-wise-light-gray dark:hover:bg-gray-700 transition-colors duration-200" onclick="closeLocationTypeForm()">Cancel</button>
                                    <button type="submit" id="location-type-submit-button" class="px-4 py-2 bg-wise-blue-500 text-white rounded-md hover:bg-wise-blue-600 transition-colors duration-200 shadow-md">OK</button>
                                </div>
                            </form>
                        </div>
                    </div>
                `,
            },
            
            'article a': {
                detail: `
                    <h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Detail Artikel A</h2>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary">Ini adalah konten terperinci untuk Artikel A. Ini baru saja diperbarui dan berisi informasi penting mengenai pembaruan sistem.</p>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Terakhir diperbarui: 2 jam yang lalu</p>
                `,
            },
            'paragraph b': {
                detail: `
                    <h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Detail Paragraf B</h2>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary">Di sini Anda akan menemukan informasi lebih lanjut tentang Paragraf B. Bagian ini mencakup berbagai aspek penanganan dan pemrosesan data.</p>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Terakhir diperbarui: 1 jam yang lalu</p>
                `,
            },
            'method c': {
                detail: `
                    <h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Detail Metode C</h2>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary">Detail tentang Metode C, termasuk langkah-langkah implementasi dan praktik terbaiknya. Metode ini sangat penting untuk mengoptimalkan kinerja.</p>
                    <p class="text-wise-gray dark:text-wise-dark-text-secondary text-sm mt-2">Terakhir diperbarui: 30 menit yang lalu</p>
                `,
            },
        };

        const searchItems = [
            { id: 'article a', title: 'Artikel A', category: 'Umum', lastUpdated: '2 jam yang lalu' },
            { id: 'paragraph b', title: 'Paragraf B', category: 'Dokumentasi', lastUpdated: '1 jam yang lalu' },
            { id: 'method c', title: 'Metode C', category: 'Teknis', lastUpdated: '30 menit yang lalu' },
            { id: 'recent-booking', title: 'Pemesanan baru untuk Proyek Alpha', category: 'Pemesanan', lastUpdated: '5 menit yang lalu' },
            { id: 'crew-task', title: 'Tugas kru #123 selesai', category: 'Pekerjaan', lastUpdated: '1 jam yang lalu' },
            { id: 'inventory-update', title: 'Pembaruan inventaris: 10 unit ditambahkan ke Gudang', category: 'Inventaris', lastUpdated: '3 jam yang lalu' },
            { id: 'vehicle-a', title: 'Loader Berat A', category: 'Manajemen Halaman', lastUpdated: '1 hari yang lalu' },
            { id: 'delivery-x', title: 'Pengiriman X dari Pemasok A', category: 'Penerimaan', lastUpdated: '4 jam yang lalu' },
            { id: 'order-123', title: 'Pesanan Pelanggan #123', category: 'Perencanaan Pesanan', lastUpdated: '1 hari yang lalu' },
            { id: 'integration-crm', title: 'Status Integrasi CRM', category: 'Lintas Aplikasi', lastUpdated: '1 jam yang lalu' },
            { id: 'report-q1', title: 'Laporan Kinerja Q1', category: 'Kinerja', lastUpdated: '2 minggu yang lalu' },
            { id: 'setting-notifications', title: 'Preferensi Notifikasi', category: 'Optimasi Pengaturan', lastUpdated: 'Kemarin' },
            { id: 'log-errors', title: 'Log Kesalahan', category: 'Manajemen Sistem', lastUpdated: '5 menit yang lalu' },
            { id: 'archive-finance', title: 'Laporan Keuangan 2023', category: 'Pengarsipan Data', lastUpdated: 'Jan 2024' },
            // Tambahkan item pencarian untuk anak-anak baru
            { id: 'dashboard-summary', title: 'Ringkasan Dashboard', category: 'Dashboard', lastUpdated: 'Sekarang' },
            { id: 'dashboard-reports', title: 'Laporan Dashboard', category: 'Dashboard', lastUpdated: 'Q2 2025' },
            { id: 'dashboard-alerts', title: 'Peringatan Dashboard', category: 'Dashboard', lastUpdated: '3 aktif' },
            { id: 'yard-vehicles', title: 'Kendaraan Halaman', category: 'Manajemen Halaman', lastUpdated: 'Baru saja diperbarui' },
            { id: 'yard-equipment', title: 'Peralatan Halaman', category: 'Manajemen Halaman', lastUpdated: 'Baru saja diperbarui' },
            { id: 'yard-personnel', title: 'Personel Halaman', category: 'Manajemen Halaman', lastUpdated: 'Baru saja diperbarui' },
            { id: 'receiving-deliveries', title: 'Pengiriman Penerimaan', category: 'Penerimaan', lastUpdated: 'Hari ini' },
            { id: 'receiving-returns', title: 'Pengembalian Penerimaan', category: 'Penerimaan', lastUpdated: 'Minggu lalu' },
            { id: 'receiving-vendors', title: 'Vendor Penerimaan', category: 'Penerimaan', lastUpdated: 'Bulanan' },
            { id: 'order-new', title: 'Pesanan Baru', category: 'Perencanaan Pesanan', lastUpdated: 'Hari ini' },
            { id: 'order-pending', title: 'Pesanan Tertunda', category: 'Perencanaan Pesanan', lastUpdated: 'Berlangsung' },
            { id: 'order-history', title: 'Riwayat Pesanan', category: 'Perencanaan Pesanan', lastUpdated: 'Sepanjang waktu' },
            { id: 'work-tasks', title: 'Tugas Pekerjaan', category: 'Pekerjaan', lastUpdated: 'Aktif' },
            { id: 'work-schedule', title: 'Jadwal Pekerjaan', category: 'Pekerjaan', lastUpdated: 'Harian' },
            { id: 'work-teams', title: 'Tim Pekerjaan', category: 'Pekerjaan', lastUpdated: 'Aktif' },
            { id: 'cross-app-integrations', title: 'Integrasi Lintas Aplikasi', category: 'Lintas Aplikasi', lastUpdated: 'Aktif' },
            { id: 'cross-app-data-sync', title: 'Sinkronisasi Data Lintas Aplikasi', category: 'Lintas Aplikasi', lastUpdated: 'Terbaru' },
            { id: 'cross-app-api', title: 'Manajemen API Lintas Aplikasi', category: 'Lintas Aplikasi', lastUpdated: 'Aktif' },
            { id: 'performance-kpis', title: 'KPI Kinerja', category: 'Kinerja', lastUpdated: 'Langsung' },
            { id: 'performance-analytics', title: 'Analitik Kinerja', category: 'Kinerja', lastUpdated: 'Harian' },
            { id: 'performance-goals', title: 'Sasaran Kinerja', category: 'Kinerja', lastUpdated: 'Triwulanan' },
            { id: 'configuration-warehouse', title: 'Konfigurasi Gudang', category: 'Configuration', lastUpdated: 'Terbaru' },
            { id: 'configuration-zone', title: 'Konfigurasi Zona', category: 'Configuration', lastUpdated: 'Terbaru' },
            { id: 'configuration-location-type', title: 'Konfigurasi Tipe Lokasi', category: 'Configuration', lastUpdated: 'Terbaru' },
            { id: 'system-users', title: 'Pengguna Sistem', category: 'Manajemen Sistem', lastUpdated: 'Aktif' },
            { id: 'system-logs', title: 'Log Sistem', category: 'Manajemen Sistem', lastUpdated: 'Terbaru' },
            { id: 'system-backup', title: 'Cadangan Sistem', category: 'Manajemen Sistem', lastUpdated: 'Harian' },
            { id: 'archive-documents', title: 'Dokumen Diarsipkan', category: 'Pengarsipan Data', lastUpdated: 'Lama' },
            { id: 'archive-media', title: 'Media Diarsipkan', category: 'Pengarsipan Data', lastUpdated: 'Lama' },
            { id: 'archive-financial', title: 'Keuangan Diarsipkan', category: 'Pengarsipan Data', lastUpdated: 'Lama' },
        ];

        let currentCategory = 'dashboard';
        let activeFilters = []; // Untuk menyimpan filter aktif
        let searchHistory = JSON.parse(localStorage.getItem('searchHistory')) || []; // Muat riwayat dari localStorage

        // Mapping untuk membantu menemukan induk kategori anak
        const parentMapping = {
            'dashboard-summary': 'dashboard', 'dashboard-reports': 'dashboard', 'dashboard-alerts': 'dashboard',
            'yard-vehicles': 'yard-management', 'yard-equipment': 'yard-management', 'yard-personnel': 'yard-management',
            'receiving-deliveries': 'receiving', 'receiving-returns': 'receiving', 'receiving-vendors': 'receiving',
            'order-new': 'order', 'order-pending': 'order', 'order-history': 'order',
            'work-tasks': 'work', 'work-schedule': 'work', 'work-teams': 'work',
            'cross-app-integrations': 'cross-application', 'cross-app-data-sync': 'cross-application', 'cross-app-api': 'cross-application',
            'yard': 'inventory', 'warehouse': 'inventory', 'storage': 'inventory', // Inventory children
            'performance-kpis': 'performance', 'performance-analytics': 'performance', 'performance-goals': 'performance',
            'configuration-warehouse': 'configuration', 'configuration-zone': 'configuration', 'configuration-location-type': 'configuration', // Configuration children
            'system-users': 'system', 'system-logs': 'system', 'system-backup': 'system',
            'archive-documents': 'archive', 'archive-media': 'archive', 'archive-financial': 'archive'
        };

        /**
         * Mengaktifkan/menonaktifkan anak untuk item sidebar mana pun.
         * @param {string} category - ID kategori utama sidebar.
         */
        function toggleChildren(category) {
            const childrenDiv = document.getElementById(`${category}-children`);
            const arrowIcon = document.getElementById(`${category}-arrow`);
            
            if (childrenDiv && arrowIcon) {
                childrenDiv.classList.toggle('hidden');
                arrowIcon.classList.toggle('rotate-90');
                arrowIcon.classList.toggle('rotate-0');
            }

            // Jika induk diklik dan anak-anaknya ditampilkan, pilih kategori induk
            if (!childrenDiv.classList.contains('hidden')) {
                selectCategory(category);
            }
        }

        /**
         * Memilih kategori sidebar (utama atau anak) dan memperbarui tampilan konten.
         * @param {string} category - ID kategori yang dipilih.
         */
        function selectCategory(category) {
            // Hapus kelas aktif dari semua item sidebar dan anak-anak
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active-sidebar-item', 'bg-wise-light-gray', 'dark:bg-gray-700');
            });
            document.querySelectorAll('.sidebar-child').forEach(item => {
                item.classList.remove('bg-gray-100', 'dark:bg-gray-700', 'font-medium', 'text-wise-dark-gray', 'dark:text-wise-dark-text-primary');
                item.classList.add('text-wise-gray', 'dark:text-wise-dark-text-secondary');
            });

            // Tambahkan kelas aktif ke item yang dipilih
            const selectedItem = document.getElementById(`sidebar-${category}`);
            if (selectedItem) {
                selectedItem.classList.add('active-sidebar-item', 'bg-wise-light-gray', 'dark:bg-gray-700');
            } else {
                // Jika itu anak, sorot anak dan induknya
                const childElement = document.querySelector(`[onclick="selectCategory('${category}')"]`);
                if (childElement) {
                    childElement.classList.add('bg-gray-100', 'dark:bg-gray-700', 'font-medium', 'text-wise-dark-gray', 'dark:text-wise-dark-text-primary');
                    childElement.classList.remove('text-wise-gray', 'dark:text-wise-dark-text-secondary');
                    
                    const parentCategory = parentMapping[category]; // Temukan induk menggunakan mapping
                    if (parentCategory) {
                        const parentSidebarItem = document.getElementById(`sidebar-${parentCategory}`);
                        if (parentSidebarItem) {
                            parentSidebarItem.classList.add('active-sidebar-item', 'bg-wise-light-gray', 'dark:bg-gray-700');
                        }
                        // Pastikan anak-anak induk terlihat
                        const parentChildrenDiv = document.getElementById(`${parentCategory}-children`);
                        const parentArrowIcon = document.getElementById(`${parentCategory}-arrow`);
                        if (parentChildrenDiv && parentChildrenDiv.classList.contains('hidden')) {
                            parentChildrenDiv.classList.remove('hidden');
                            if (parentArrowIcon) {
                                parentArrowIcon.classList.remove('rotate-0');
                                parentArrowIcon.classList.add('rotate-90');
                            }
                        }
                    }
                }
            }
            
            currentCategory = category;
            const content = contentData[category];
            const defaultContentArea = document.getElementById('default-content-area');
            const searchOverlay = document.getElementById('search-overlay');

            searchOverlay.classList.add('hidden'); // Sembunyikan overlay pencarian jika terlihat

            if (content && content.full) {
                defaultContentArea.innerHTML = content.full;
                defaultContentArea.classList.remove('hidden');
            } else if (content && content.detail) { // Jika itu anak dengan hanya konten detail
                defaultContentArea.innerHTML = content.detail;
                defaultContentArea.classList.remove('hidden');
            } else {
                defaultContentArea.innerHTML = `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Konten untuk ${category.charAt(0).toUpperCase() + category.slice(1).replace(/-/g, ' ')}</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Belum ada konten spesifik untuk kategori ini.</p>`;
                defaultContentArea.classList.remove('hidden');
            }
            
            // Panggil fungsi inisialisasi CRUD jika kategori konfigurasi dipilih
            if (category === 'configuration-warehouse') {
                renderWarehouseList();
                initializeTabButtons('warehouse-form-modal');
                activateTab('warehouse-address');
            } else if (category === 'configuration-zone') {
                renderZoneList();
                initializeTabButtons('zone-form-modal'); // Tidak ada tab di form zona, tapi jaga fungsi
            } else if (category === 'configuration-location-type') {
                renderLocationTypeList();
                initializeTabButtons('location-type-form-modal');
                activateTab('general-location');
            }

            // Sembunyikan sidebar di seluler setelah pemilihan
            if (window.innerWidth < 768) {
                document.getElementById('sidebar').classList.add('-translate-x-full');
            }
        }

        /**
         * Menangani input pencarian dari header utama.
         * Membuka overlay pencarian dan memicu pencarian di dalamnya.
         * @param {string} query - Query pencarian.
         */
        function handleSearch(query) {
            const searchOverlay = document.getElementById('search-overlay');
            const overlaySearchInput = document.getElementById('overlay-search-input');
            const searchHistoryDropdown = document.getElementById('search-history-dropdown');

            if (query.length > 0) {
                searchOverlay.classList.remove('hidden');
                overlaySearchInput.value = query; // Sinkronkan kueri ke input pencarian overlay
                performSearch(query, 'overlay'); // Picu pencarian di overlay
                searchHistoryDropdown.classList.add('hidden'); // Sembunyikan riwayat saat mengetik
            } else {
                searchOverlay.classList.add('hidden');
                // Saat input pencarian dikosongkan, kembali ke konten kategori saat ini
                selectCategory(currentCategory);
                showSearchHistory(); // Tampilkan kembali riwayat saat search bar kosong dan fokus
            }
        }

        /**
         * Melakukan pencarian berdasarkan query dan menampilkan hasilnya.
         * Digunakan oleh search bar utama dan overlay.
         * @param {string} query - Query pencarian.
         * @param {string} source - 'main' untuk search bar header, 'overlay' untuk search bar overlay.
         */
        function performSearch(query, source) {
            const resultsPanel = source === 'overlay' ? document.getElementById('overlay-search-results-list-panel') : document.getElementById('search-results-content');
            const detailPanel = source === 'overlay' ? document.getElementById('overlay-detail-content-panel') : null; // Hanya overlay yang punya detail panel terpisah
            const filtersContainer = source === 'overlay' ? document.getElementById('overlay-search-filters') : document.getElementById('search-filters');

            // Sembunyikan filter sebelumnya terlebih dahulu
            document.getElementById('overlay-filter-articles').classList.add('hidden');
            document.getElementById('overlay-filter-photography').classList.add('hidden');
            document.getElementById('filter-articles').classList.add('hidden');
            document.getElementById('filter-photography').classList.add('hidden');


            if (query.length > 0) {
                filtersContainer.classList.remove('hidden');
                
                let filteredResults = searchItems.filter(item => 
                    item.title.toLowerCase().includes(query.toLowerCase()) ||
                    item.category.toLowerCase().includes(query.toLowerCase()) ||
                    (item.id && item.id.toLowerCase().includes(query.toLowerCase()))
                );

                // Terapkan filter aktif jika ada
                if (activeFilters.length > 0) {
                    filteredResults = filteredResults.filter(item => 
                        activeFilters.some(filter => item.category.toLowerCase().includes(filter.toLowerCase()))
                    );
                }

                resultsPanel.innerHTML = ''; 

                if (filteredResults.length > 0) {
                    // Tampilkan filter berdasarkan kategori yang relevan dalam hasil
                    // Ini masih mock, idealnya akan dinamis berdasarkan kategori di filteredResults
                    if (filteredResults.some(item => item.category.toLowerCase().includes('artikel') || item.title.toLowerCase().includes('artikel'))) {
                        document.getElementById(`${source}-filter-articles`).classList.remove('hidden');
                    }
                    if (filteredResults.some(item => item.category.toLowerCase().includes('fotografi') || item.title.toLowerCase().includes('foto'))) {
                        document.getElementById(`${source}-filter-photography`).classList.remove('hidden');
                    }
                    
                    filteredResults.forEach(item => {
                        const resultItem = document.createElement('div');
                        resultItem.classList.add('py-2', 'px-3', 'bg-wise-light-gray', 'dark:bg-gray-800', 'rounded-lg', 'shadow-sm', 'cursor-pointer', 'hover:bg-gray-100', 'dark:hover:bg-gray-700', 'mb-2');
                        resultItem.innerHTML = `
                            <h4 class="text-wise-dark-gray dark:text-wise-dark-text-primary font-medium text-sm">${item.title}</h4>
                            <p class="text-wise-gray dark:text-wise-dark-text-secondary text-xs">Kategori: ${item.category} | Terakhir Diperbarui: ${item.lastUpdated}</p>
                        `;
                        resultItem.onmouseenter = (event) => showPreview(item.id, event); 
                        resultItem.onclick = () => selectSearchResult(item.id, item.title, query); // Tambahkan query ke selectSearchResult
                        resultsPanel.appendChild(resultItem);
                    });
                } else {
                    resultsPanel.innerHTML = `<p class="p-3 text-wise-gray dark:text-wise-dark-text-secondary text-sm">Tidak ada hasil ditemukan.</p>`;
                    filtersContainer.classList.add('hidden'); // Sembunyikan filter jika tidak ada hasil
                }
                if (detailPanel) {
                    detailPanel.innerHTML = `<p class="text-wise-gray dark:text-wise-dark-text-secondary text-center">Arahkan kursor ke item di sebelah kiri untuk pratinjau, atau klik untuk melihat detail.</p>`;
                }
            } else {
                resultsPanel.innerHTML = '';
                if (detailPanel) {
                    detailPanel.innerHTML = `<p class="text-wise-gray dark:text-wise-dark-text-secondary text-center">Arahkan kursor ke item di sebelah kiri untuk pratinjau, atau klik untuk melihat detail.</p>`;
                }
                filtersContainer.classList.add('hidden'); // Sembunyikan filter saat pencarian kosong
            }
        }

        /**
         * Menampilkan pratinjau di panel detail overlay.
         * @param {string} id - ID item konten.
         */
        function showPreview(id) {
            const overlayDetailContentPanel = document.getElementById('overlay-detail-content-panel');
            const content = contentData[id];

            if (content && (content.detail || content.full)) {
                overlayDetailContentPanel.innerHTML = `
                    ${content.detail || content.full}
                    <button class="mt-4 px-4 py-2 bg-wise-blue-500 text-white rounded-md hover:bg-wise-blue-600 transition-colors duration-200 shadow-md active:scale-95 transform" onclick="displayContentInMainDashboard('${id}')">
                        Tampilkan Halaman
                    </button>
                `;
            } else {
                overlayDetailContentPanel.innerHTML = `<p class="text-wise-gray dark:text-wise-dark-text-secondary text-center">Tidak ada pratinjau tersedia untuk item ini.</p>`;
            }
        }

        /**
         * Memilih hasil pencarian dari overlay (saat diklik).
         * @param {string} id - ID item yang dipilih.
         * @param {string} title - Judul item yang dipilih.
         * @param {string} query - Query pencarian yang menghasilkan item ini.
         */
        function selectSearchResult(id, title, query) {
            addSearchHistory(query); // Tambahkan query ke riwayat pencarian
            displayContentInMainDashboard(id); // Tampilkan konten lengkapnya di dashboard utama
        }

        /**
         * Menampilkan konten di area dashboard utama dan menutup overlay.
         * @param {string} id - ID konten yang akan ditampilkan.
         */
        function displayContentInMainDashboard(id) {
            const content = contentData[id];
            const defaultContentArea = document.getElementById('default-content-area');
            
            if (content && content.full) {
                defaultContentArea.innerHTML = content.full;
            } else if (content && content.detail) {
                defaultContentArea.innerHTML = content.detail;
            } else {
                defaultContentArea.innerHTML = `<h2 class="text-xl md:text-2xl font-semibold text-wise-dark-gray dark:text-wise-dark-text-primary mb-4">Konten Lengkap untuk ${id.charAt(0).toUpperCase() + id.slice(1).replace(/-/g, ' ')}</h2><p class="text-wise-gray dark:text-wise-dark-text-secondary">Tidak ada konten lengkap tersedia.</p>`;
            }
            
            closeSearchOverlay(); // Tutup overlay pencarian
            selectCategory(id); // Panggil selectCategory untuk memperbarui status aktif sidebar
        }

        /**
         * Menambahkan filter ke daftar filter aktif dan memicu pencarian ulang.
         * @param {string} filterName - Nama filter yang akan ditambahkan.
         */
        function addOverlayFilter(filterName) {
            if (!activeFilters.includes(filterName.toLowerCase())) {
                activeFilters.push(filterName.toLowerCase());
                document.getElementById(`overlay-filter-${filterName.toLowerCase()}`).classList.remove('hidden');
                performSearch(document.getElementById('overlay-search-input').value, 'overlay');
            }
        }

        /**
         * Menghapus filter dari daftar filter aktif dan memicu pencarian ulang.
         * @param {string} filterName - Nama filter yang akan dihapus.
         */
        function removeOverlayFilter(filterName) {
            activeFilters = activeFilters.filter(filter => filter !== filterName.toLowerCase());
            document.getElementById(`overlay-filter-${filterName.toLowerCase()}`).classList.add('hidden');
            performSearch(document.getElementById('overlay-search-input').value, 'overlay');
        }

        /**
         * Menghapus semua filter aktif dan memicu pencarian ulang.
         */
        function removeAllOverlayFilters() {
            activeFilters = [];
            document.getElementById('overlay-filter-articles').classList.add('hidden');
            document.getElementById('overlay-filter-photography').classList.add('hidden');
            document.getElementById('overlay-search-input').value = '';
            performSearch('', 'overlay'); // Hapus hasil pencarian
        }
        
        /**
         * Menutup overlay pencarian.
         */
        function closeSearchOverlay() {
            document.getElementById('search-overlay').classList.add('hidden');
            document.getElementById('search-input').value = ''; // Hapus input pencarian utama
            document.getElementById('overlay-search-input').value = ''; // Hapus input pencarian overlay
            activeFilters = []; // Hapus filter aktif
            document.getElementById('overlay-search-filters').classList.add('hidden'); // Sembunyikan filter di overlay
            document.getElementById('filter-articles').classList.add('hidden'); // Pastikan filter header utama tersembunyi
            document.getElementById('filter-photography').classList.add('hidden'); // Pastikan filter header utama tersembunyi
            document.getElementById('search-history-dropdown').classList.add('hidden'); // Sembunyikan riwayat
            selectCategory(currentCategory); // Kembali ke konten kategori saat ini
        }

        /**
         * Mengaktifkan/menonaktifkan dropdown profil pengguna.
         */
        function toggleUserDropdown() {
            const userDropdown = document.getElementById('user-dropdown');
            userDropdown.classList.toggle('hidden');
        }

        // Tutup dropdown pengguna jika diklik di luar
        document.addEventListener('click', function(event) {
            const userIconContainer = document.querySelector('header .relative.flex.items-center');
            const userDropdown = document.getElementById('user-dropdown');
            const searchInput = document.getElementById('search-input');
            const searchHistoryDropdown = document.getElementById('search-history-dropdown');

            if (userIconContainer && userDropdown && !userIconContainer.contains(event.target)) {
                userDropdown.classList.add('hidden');
            }
            // Tutup riwayat pencarian jika klik di luar search input atau riwayat itu sendiri
            if (!searchInput.contains(event.target) && !searchHistoryDropdown.contains(event.target)) {
                searchHistoryDropdown.classList.add('hidden');
            }
        });

        /**
         * Menangani logout.
         */
        function handleLogout() {
            alert('Anda telah berhasil keluar.');
            window.location.href = 'login.html'; // Arahkan ke halaman login
        }

        /**
         * Mengaktifkan/menonaktifkan mode gelap/terang.
         */
        function toggleDarkMode() {
            const htmlElement = document.documentElement;
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');

            if (htmlElement.classList.contains('dark')) {
                htmlElement.classList.remove('dark');
                localStorage.setItem('theme', 'light');
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            } else {
                htmlElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            }
        }

        /**
         * Menavigasi ke halaman profil.
         */
        function navigateToProfile() {
            window.location.href = 'profile.html';
        }

        /**
         * Menambahkan query ke riwayat pencarian.
         * @param {string} query - Query pencarian yang akan ditambahkan.
         */
        function addSearchHistory(query) {
            if (query && !searchHistory.includes(query)) {
                searchHistory.unshift(query); // Tambahkan ke awal array
                searchHistory = searchHistory.slice(0, 5); // Batasi hingga 5 item terakhir
                localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
            }
        }

        /**
         * Menampilkan riwayat pencarian di dropdown.
         */
        function showSearchHistory() {
            const historyDropdown = document.getElementById('search-history-dropdown');
            const historyContent = document.getElementById('search-history-content');
            
            historyContent.innerHTML = ''; // Bersihkan konten sebelumnya

            if (searchHistory.length > 0) {
                searchHistory.forEach((item, index) => {
                    const historyItem = document.createElement('div');
                    historyItem.classList.add('flex', 'items-center', 'justify-between', 'px-3', 'py-2', 'cursor-pointer', 'hover:bg-wise-light-gray', 'dark:hover:bg-gray-700', 'rounded-md');
                    historyItem.innerHTML = `
                        <span class="text-wise-dark-gray dark:text-wise-dark-text-primary text-sm" onclick="applySearchHistory('${item}')">${item}</span>
                        <button class="text-wise-gray dark:text-wise-dark-text-secondary hover:text-wise-dark-gray dark:hover:text-wise-dark-text-primary text-xs ml-2" onclick="removeSearchHistory(${index})">&times;</button>
                    `;
                    historyContent.appendChild(historyItem);
                });
                const clearAllButton = document.createElement('div');
                clearAllButton.classList.add('text-right', 'pt-2', 'pb-1', 'px-3');
                clearAllButton.innerHTML = `<button class="text-wise-gray dark:text-wise-dark-text-secondary hover:underline text-xs" onclick="clearAllSearchHistory()">Hapus Semua Riwayat</button>`;
                historyContent.appendChild(clearAllButton);

                historyDropdown.classList.remove('hidden');
            } else {
                historyContent.innerHTML = `<p class="p-3 text-wise-gray dark:text-wise-dark-text-secondary text-sm">Tidak ada riwayat pencarian.</p>`;
                historyDropdown.classList.remove('hidden');
            }
        }

        /**
         * Menerapkan item riwayat pencarian ke input pencarian dan memicu pencarian.
         * @param {string} query - Query dari riwayat yang akan diterapkan.
         */
        function applySearchHistory(query) {
            document.getElementById('search-input').value = query;
            handleSearch(query);
            document.getElementById('search-history-dropdown').classList.add('hidden'); // Sembunyikan riwayat setelah memilih
        }

        /**
         * Menghapus item individual dari riwayat pencarian.
         * @param {number} index - Indeks item yang akan dihapus.
         */
        function removeSearchHistory(index) {
            searchHistory.splice(index, 1);
            localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
            showSearchHistory(); // Perbarui tampilan riwayat
        }

        /**
         * Menghapus semua riwayat pencarian.
         */
        function clearAllSearchHistory() {
            searchHistory = [];
            localStorage.removeItem('searchHistory');
            showSearchHistory(); // Perbarui tampilan riwayat
        }

        // --- CRUD Data (Client-side simulation) ---
        let warehouses = JSON.parse(localStorage.getItem('warehouses')) || [
            { id: 'DCB', description: 'DC BUAH BATU', active: true, address1: 'JL TERUSAN BUAH BATU NO 12, BATUNUNGGAL', address2: '', address3: '', city: 'Bandung', state: 'Jawa Barat', postalCode: '40266', country: 'Indonesia', faxNumber: '(022)-88884377', attentionTo: '', phoneNumber: '(022)-7540576 / 77', emailAddress: '', uccEanNumber: '', returnAddressSame: false, returnName: 'DC BUAH BATU', returnAddress1: 'JL TERUSAN BUAH BATU NO 12, BATUNUNGGAL, BANDUNG.', returnAddress2: '', returnAddress3: '', returnCity: 'Bandung', returnState: 'Jawa Barat', returnPostalCode: '40266', returnCountry: 'Indonesia', returnFaxNumber: '', returnAttentionTo: '', returnPhoneNumber: '', returnEmailAddress: '', returnUccEanNumber: '', slottingMoveFileDirectory: '', defaultLocationForUnslottedItems: '', renderedDocumentPdfFileDirectory: '\\\\scale\\fs\\vls\\Report\\DCB', userDefinedField1: 'PT. AKUR PRATAMA', userDefinedField2: '', userDefinedField3: '', userDefinedField4: '', userDefinedField5: '', userDefinedField6: '', userDefinedField7: '8.00000', userDefinedField8: '0.00000', users: ['Abdu23074560', 'Abdul04120625', 'Abdul9100020', 'Ades17080031', 'Adil2010099', 'Adil2020284', 'Adi22110060', 'Adli23070426', 'Adli24070022', 'Administrator', 'ADMReturDCB', 'Alfandi24051301', 'Agung15050074', 'Agung92060006', 'AgusHDA182', 'Aji18100334', 'Aldi18101752', 'Ali17120115', 'Andri06010006', 'Andri10010079', 'Angg', 'Anthc', 'Anwa', 'Apep', 'Arif14', 'anueu03090082'] }, // Example data [cite: 10, 11]
            { id: 'DCC', description: 'DC CIKONENG', active: true, address1: '', address2: '', address3: '', city: '', state: '', postalCode: '', country: '', faxNumber: '', attentionTo: '', phoneNumber: '', emailAddress: '', uccEanNumber: '', returnAddressSame: false, returnName: '', returnAddress1: '', returnAddress2: '', returnAddress3: '', returnCity: '', returnState: '', returnPostalCode: '', returnCountry: '', returnFaxNumber: '', returnAttentionTo: '', returnPhoneNumber: '', returnEmailAddress: '', returnUccEanNumber: '', slottingMoveFileDirectory: '', defaultLocationForUnslottedItems: '', renderedDocumentPdfFileDirectory: '', userDefinedField1: '', userDefinedField2: '', userDefinedField3: '', userDefinedField4: '', userDefinedField5: '', userDefinedField6: '', userDefinedField7: '', userDefinedField8: '', users: [] },
            { id: 'DCE', description: 'DC EXTENTION', active: true, address1: '', address2: '', address3: '', city: '', state: '', postalCode: '', country: '', faxNumber: '', attentionTo: '', phoneNumber: '', emailAddress: '', uccEanNumber: '', returnAddressSame: false, returnName: '', returnAddress1: '', returnAddress2: '', returnAddress3: '', returnCity: '', returnState: '', returnPostalCode: '', returnCountry: '', returnFaxNumber: '', returnAttentionTo: '', returnPhoneNumber: '', returnEmailAddress: '', returnUccEanNumber: '', slottingMoveFileDirectory: '', defaultLocationForUnslottedItems: '', renderedDocumentPdfFileDirectory: '', userDefinedField1: '', userDefinedField2: '', userDefinedField3: '', userDefinedField4: '', userDefinedField5: '', userDefinedField6: '', userDefinedField7: '', userDefinedField8: '', users: [] },
            { id: 'DCF', description: 'DC BUAH BATU FRESH', active: true, address1: '', address2: '', address3: '', city: '', state: '', postalCode: '', country: '', faxNumber: '', attentionTo: '', phoneNumber: '', emailAddress: '', uccEanNumber: '', returnAddressSame: false, returnName: '', returnAddress1: '', returnAddress2: '', returnAddress3: '', returnCity: '', returnState: '', returnPostalCode: '', returnCountry: '', returnFaxNumber: '', returnAttentionTo: '', returnPhoneNumber: '', returnEmailAddress: '', returnUccEanNumber: '', slottingMoveFileDirectory: '', defaultLocationForUnslottedItems: '', renderedDocumentPdfFileDirectory: '', userDefinedField1: '', userDefinedField2: '', userDefinedField3: '', userDefinedField4: '', userDefinedField5: '', userDefinedField6: '', userDefinedField7: '', userDefinedField8: '', users: [] },
            { id: 'DCJ', description: 'DC JAKARTA', active: true, address1: '', address2: '', address3: '', city: '', state: '', postalCode: '', country: '', faxNumber: '', attentionTo: '', phoneNumber: '', emailAddress: '', uccEanNumber: '', returnAddressSame: false, returnName: '', returnAddress1: '', returnAddress2: '', returnAddress3: '', returnCity: '', returnState: '', returnPostalCode: '', returnCountry: '', returnFaxNumber: '', returnAttentionTo: '', returnPhoneNumber: '', returnEmailAddress: '', returnUccEanNumber: '', slottingMoveFileDirectory: '', defaultLocationForUnslottedItems: '', renderedDocumentPdfFileDirectory: '', userDefinedField1: '', userDefinedField2: '', userDefinedField3: '', userDefinedField4: '', userDefinedField5: '', userDefinedField6: '', userDefinedField7: '', userDefinedField8: '', users: [] },
            { id: 'DCK', description: 'DC KAYU MANIS', active: true, address1: '', address2: '', address3: '', city: '', state: '', postalCode: '', country: '', faxNumber: '', attentionTo: '', phoneNumber: '', emailAddress: '', uccEanNumber: '', returnAddressSame: false, returnName: '', returnAddress1: '', returnAddress2: '', returnAddress3: '', returnCity: '', returnState: '', returnPostalCode: '', returnCountry: '', returnFaxNumber: '', returnAttentionTo: '', returnPhoneNumber: '', returnEmailAddress: '', returnUccEanNumber: '', slottingMoveFileDirectory: '', defaultLocationForUnslottedItems: '', renderedDocumentPdfFileDirectory: '', userDefinedField1: '', userDefinedField2: '', userDefinedField3: '', userDefinedField4: '', userDefinedField5: '', userDefinedField6: '', userDefinedField7: '', userDefinedField8: '', users: [] },
            { id: 'DCL', description: 'DC LEUWIPANJANG', active: true, address1: '', address2: '', address3: '', city: '', state: '', postalCode: '', country: '', faxNumber: '', attentionTo: '', phoneNumber: '', emailAddress: '', uccEanNumber: '', returnAddressSame: false, returnName: '', returnAddress1: '', returnAddress2: '', returnAddress3: '', returnCity: '', returnState: '', returnPostalCode: '', returnCountry: '', returnFaxNumber: '', returnAttentionTo: '', returnPhoneNumber: '', returnEmailAddress: '', returnUccEanNumber: '', slottingMoveFileDirectory: '', defaultLocationForUnslottedItems: '', renderedDocumentPdfFileDirectory: '', userDefinedField1: '', userDefinedField2: '', userDefinedField3: '', userDefinedField4: '', userDefinedField5: '', userDefinedField6: '', userDefinedField7: '', userDefinedField8: '', users: [] },
            { id: 'DCM', description: 'DC MOCHAMAD TOHA', active: true, address1: '', address2: '', address3: '', city: '', state: '', postalCode: '', country: '', faxNumber: '', attentionTo: '', phoneNumber: '', emailAddress: '', uccEanNumber: '', returnAddressSame: false, returnName: '', returnAddress1: '', returnAddress2: '', returnAddress3: '', returnCity: '', returnState: '', returnPostalCode: '', returnCountry: '', returnFaxNumber: '', returnAttentionTo: '', returnPhoneNumber: '', returnEmailAddress: '', uccEanNumber: '', returnAddressSame: false, returnName: '', returnAddress1: '', returnAddress2: '', returnAddress3: '', returnCity: '', returnState: '', returnPostalCode: '', returnCountry: '', returnFaxNumber: '', returnAttentionTo: '', returnPhoneNumber: '', returnEmailAddress: '', returnUccEanNumber: '', slottingMoveFileDirectory: '', defaultLocationForUnslottedItems: '', renderedDocumentPdfFileDirectory: '', userDefinedField1: '', userDefinedField2: '', userDefinedField3: '', userDefinedField4: '', userDefinedField5: '', userDefinedField6: '', userDefinedField7: '', userDefinedField8: '', users: [] },
            { id: 'DCP', description: 'DC PELABUHAN RATU', active: true, address1: '', address2: '', address3: '', city: '', state: '', postalCode: '', country: '', faxNumber: '', attentionTo: '', phoneNumber: '', emailAddress: '', uccEanNumber: '', returnAddressSame: false, returnName: '', returnAddress1: '', returnAddress2: '', returnAddress3: '', returnCity: '', returnState: '', returnPostalCode: '', returnCountry: '', returnFaxNumber: '', returnAttentionTo: '', returnPhoneNumber: '', returnEmailAddress: '', returnUccEanNumber: '', slottingMoveFileDirectory: '', defaultLocationForUnslottedItems: '', renderedDocumentPdfFileDirectory: '', userDefinedField1: '', userDefinedField2: '', userDefinedField3: '', userDefinedField4: '', userDefinedField5: '', userDefinedField6: '', userDefinedField7: '', userDefinedField8: '', users: [] },
            { id: 'DCS', description: 'DC SUMBER', active: true, address1: '', address2: '', address3: '', city: '', state: '', postalCode: '', country: '', faxNumber: '', attentionTo: '', phoneNumber: '', emailAddress: '', uccEanNumber: '', returnAddressSame: false, returnName: '', returnAddress1: '', returnAddress2: '', returnAddress3: '', returnCity: '', returnState: '', returnPostalCode: '', returnCountry: '', returnFaxNumber: '', returnAttentionTo: '', returnPhoneNumber: '', returnEmailAddress: '', returnUccEanNumber: '', slottingMoveFileDirectory: '', defaultLocationForUnslottedItems: '', renderedDocumentPdfFileDirectory: '', userDefinedField1: '', userDefinedField2: '', userDefinedField3: '', userDefinedField4: '', userDefinedField5: '', userDefinedField6: '', userDefinedField7: '', userDefinedField8: '', users: [] },
            { id: 'DCT', description: 'DC TEGAL', active: true, address1: '', address2: '', address3: '', city: '', state: '', postalCode: '', country: '', faxNumber: '', attentionTo: '', phoneNumber: '', emailAddress: '', uccEanNumber: '', returnAddressSame: false, returnName: '', returnAddress1: '', returnAddress2: '', returnAddress3: '', returnCity: '', returnState: '', returnPostalCode: '', returnCountry: '', returnFaxNumber: '', returnAttentionTo: '', returnPhoneNumber: '', returnEmailAddress: '', returnUccEanNumber: '', slottingMoveFileDirectory: '', defaultLocationForUnslottedItems: '', renderedDocumentPdfFileDirectory: '', userDefinedField1: '', userDefinedField2: '', userDefinedField3: '', userDefinedField4: '', userDefinedField5: '', userDefinedField6: '', userDefinedField7: '', userDefinedField8: '', users: [] },
            { id: 'DCY', description: 'DC YOMIMART', active: true, address1: '', address2: '', address3: '', city: '', state: '', postalCode: '', country: '', faxNumber: '', attentionTo: '', phoneNumber: '', emailAddress: '', uccEanNumber: '', returnAddressSame: false, returnName: '', returnAddress1: '', returnAddress2: '', returnAddress3: '', returnCity: '', returnState: '', returnPostalCode: '', returnCountry: '', returnFaxNumber: '', returnAttentionTo: '', returnPhoneNumber: '', returnEmailAddress: '', returnUccEanNumber: '', slottingMoveFileDirectory: '', defaultLocationForUnslottedItems: '', renderedDocumentPdfFileDirectory: '', userDefinedField1: '', userDefinedField2: '', userDefinedField3: '', userDefinedField4: '', userDefinedField5: '', userDefinedField6: '', userDefinedField7: '', userDefinedField8: '', users: [] },
            { id: 'GBG', description: 'DC GEDE BAGE', active: true, address1: '', address2: '', address3: '', city: '', state: '', postalCode: '', country: '', faxNumber: '', attentionTo: '', phoneNumber: '', emailAddress: '', uccEanNumber: '', returnAddressSame: false, returnName: '', returnAddress1: '', returnAddress2: '', returnAddress3: '', returnCity: '', returnState: '', returnPostalCode: '', returnCountry: '', returnFaxNumber: '', returnAttentionTo: '', returnPhoneNumber: '', returnEmailAddress: '', returnUccEanNumber: '', slottingMoveFileDirectory: '', defaultLocationForUnslottedItems: '', renderedDocumentPdfFileDirectory: '', userDefinedField1: '', userDefinedField2: '', userDefinedField3: '', userDefinedField4: '', userDefinedField5: '', userDefinedField6: '', userDefinedField7: '', userDefinedField8: '', users: [] },
        ];
        
        let zones = JSON.parse(localStorage.getItem('zones')) || [
            { id: 'Allocation', identifier: 'Allocation', recordType: 'ZONETYPE', description: 'Allocation', systemValue1: 'Yes', systemCreated: true, active: true }, // Example data [cite: 15]
            { id: 'Locating', identifier: 'Locating', recordType: 'ZONETYPE', description: 'Locating', systemValue1: 'Yes', systemCreated: true, active: true },
            { id: 'Work', identifier: 'Work', recordType: 'ZONETYPE', description: 'Work', systemValue1: 'Yes', systemCreated: true, active: true },
        ];

        let locationTypes = JSON.parse(localStorage.getItem('locationTypes')) || [
            { id: 'CFLOW RESV TYPE 1', locationType: 'CFLOW RESV TYPE 1', length: 120.00, width: 30.00, height: 120.00, dimensionUM: 'CM', maximumWeight: 1000.00, weightUM: 'KG', active: true, lastUpdated: '01-07-2019 9:46:38 AM User: suhartono' }, // Example data [cite: 17, 18]
            { id: 'CARTON FLOW', locationType: 'CARTON FLOW', length: 180.00, width: 60.00, height: 80.00, dimensionUM: 'CM', maximumWeight: 200.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CARTON FLOW 100/120/80', locationType: 'CARTON FLOW 100/120/80', length: 100.00, width: 120.00, height: 80.00, dimensionUM: 'CM', maximumWeight: 500.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CARTON FLOW 140/73/40', locationType: 'CARTON FLOW 140/73/40', length: 140.00, width: 73.00, height: 40.00, dimensionUM: 'CM', maximumWeight: 500.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CARTON FLOW 37/130/60', locationType: 'CARTON FLOW 37/130/60', length: 37.00, width: 130.00, height: 60.00, dimensionUM: 'CM', maximumWeight: 500.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CARTON FLOW 40/18/40', locationType: 'CARTON FLOW 40/18/40', length: 40.00, width: 18.00, height: 40.00, dimensionUM: 'CM', maximumWeight: 250.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CARTON FLOW 40/37/40', locationType: 'CARTON FLOW 40/37/40', length: 40.00, width: 37.00, height: 40.00, dimensionUM: 'CM', maximumWeight: 250.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CARTON FLOW 5 SLOT', locationType: 'CARTON FLOW 5 SLOT', length: 46.00, width: 120.00, height: 88.00, dimensionUM: 'CM', maximumWeight: 300.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CARTON FLOW 55/70/45', locationType: 'CARTON FLOW 55/70/45', length: 55.00, width: 70.00, height: 45.00, dimensionUM: 'CM', maximumWeight: 200.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CARTON FLOW 7 SLOT', locationType: 'CARTON FLOW 7 SLOT', length: 32.00, width: 120.00, height: 94.00, dimensionUM: 'CM', maximumWeight: 300.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CARTON FLOW 70/28/40', locationType: 'CARTON FLOW 70/28/40', length: 70.00, width: 28.00, height: 40.00, dimensionUM: 'CM', maximumWeight: 200.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CARTON FLOW 70/50/40', locationType: 'CARTON FLOW 70/50/40', length: 70.00, width: 50.00, height: 40.00, dimensionUM: 'CM', maximumWeight: 250.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CARTON FLOW 80/40/55', locationType: 'CARTON FLOW 80/40/55', length: 80.00, width: 40.00, height: 55.00, dimensionUM: 'CM', maximumWeight: 250.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CFLOW.TYPE A', locationType: 'CFLOW.TYPE A', length: 82.00, width: 30.00, height: 93.00, dimensionUM: 'CM', maximumWeight: 70.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CFLOW.TYPE B', locationType: 'CFLOW.TYPE B', length: 42.00, width: 38.00, height: 50.00, dimensionUM: 'CM', maximumWeight: 70.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CFLOW RESERVE 115cm', locationType: 'CFLOW RESERVE 115cm', length: 239.00, width: 122.00, height: 115.00, dimensionUM: 'CM', maximumWeight: 400.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CFLOW RESERVE 55cm', locationType: 'CFLOW RESERVE 55cm', length: 239.00, width: 122.00, height: 55.00, dimensionUM: 'CM', maximumWeight: 400.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CFLOW RESERVE 70cm', locationType: 'CFLOW RESERVE 70cm', length: 239.00, width: 122.00, height: 70.00, dimensionUM: 'CM', maximumWeight: 400.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CFLOW RESERVE 90cm', locationType: 'CFLOW RESERVE 90cm', length: 239.00, width: 122.00, height: 90.00, dimensionUM: 'CM', maximumWeight: 250.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CFLOW RESV TYPE A', locationType: 'CFLOW RESV TYPE A', length: 40.00, width: 80.00, height: 80.00, dimensionUM: 'CM', maximumWeight: 200.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CFLOW RESV TYPE B', locationType: 'CFLOW RESV TYPE B', length: 40.00, width: 80.00, height: 80.00, dimensionUM: 'CM', maximumWeight: 200.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CFLOW RESV TYPE C', locationType: 'CFLOW RESV TYPE C', length: 37.00, width: 40.00, height: 40.00, dimensionUM: 'CM', maximumWeight: 200.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CONTAINER FACE', locationType: 'CONTAINER FACE', length: 62.00, width: 42.00, height: 26.00, dimensionUM: 'CM', maximumWeight: 150.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CONTAINER PINK 2002', locationType: 'CONTAINER PINK 2002', length: 63.00, width: 43.00, height: 25.00, dimensionUM: 'CM', maximumWeight: 150.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CONTAINER PINK 2004', locationType: 'CONTAINER PINK 2004', length: 63.00, width: 43.00, height: 25.00, dimensionUM: 'CM', maximumWeight: 150.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CONTAINER PINK 2006', locationType: 'CONTAINER PINK 2006', length: 63.00, width: 43.00, height: 25.00, dimensionUM: 'CM', maximumWeight: 150.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CONTAINER PINK 2010', locationType: 'CONTAINER PINK 2010', length: 63.00, width: 43.00, height: 25.00, dimensionUM: 'CM', maximumWeight: 150.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'CONTAINER PINK 2055', locationType: 'CONTAINER PINK 2055', length: 62.00, width: 42.00, height: 26.00, dimensionUM: 'CM', maximumWeight: 150.00, weightUM: 'KG', active: true, lastUpdated: '' },
            { id: 'DCB LOADING LANE', locationType: 'DCB LOADING LANE', length: 0.00, width: 0.00, height: 0.00, dimensionUM: 'CM', maximumWeight: 0.00, weightUM: 'KG', active: true, lastUpdated: '' },
        ];


        // Dummy user data for Authorized Users in Warehouse
        const allUsers = [
            'Abdu23074560', 'Abdul04120625', 'Abdul9100020', 'Ades17080031', 'Adil2010099', 'Adil2020284',
            'Adi22110060', 'Adli23070426', 'Adli24070022', 'Administrator', 'ADMReturDCB', 'Alfandi24051301',
            'Agung15050074', 'Agung92060006', 'AgusHDA182', 'Aji18100334', 'Aldi18101752', 'Ali17120115',
            'Andri06010006', 'Andri10010079', 'Angg', 'Anthc', 'Anwa', 'Apep', 'Arif14', 'anueu03090082'
        ];


        let currentWarehouseId = null; // Untuk melacak gudang yang sedang diedit
        let currentZoneId = null; // Untuk melacak zona yang sedang diedit
        let currentLocationTypeId = null; // Untuk melacak tipe lokasi yang sedang diedit

        function generateUniqueId(prefix) {
            return prefix + Date.now();
        }

        function saveWarehouses() {
            localStorage.setItem('warehouses', JSON.stringify(warehouses));
        }

        function saveZones() {
            localStorage.setItem('zones', JSON.stringify(zones));
        }

        function saveLocationTypes() {
            localStorage.setItem('locationTypes', JSON.stringify(locationTypes));
        }

        // --- Warehouse CRUD ---
        function renderWarehouseList(filterQuery = '') {
            const container = document.getElementById('warehouse-list-container');
            container.innerHTML = ''; // Clear existing list

            const filteredWarehouses = warehouses.filter(wh =>
                wh.id.toLowerCase().includes(filterQuery.toLowerCase()) ||
                wh.description.toLowerCase().includes(filterQuery.toLowerCase())
            );

            if (filteredWarehouses.length === 0) {
                container.innerHTML = `<p class="text-wise-gray dark:text-wise-dark-text-secondary mt-4">Tidak ada gudang ditemukan.</p>`;
                return;
            }

            const table = document.createElement('table');
            table.classList.add('min-w-full', 'divide-y', 'divide-wise-border', 'dark:divide-wise-dark-border', 'mt-4', 'shadow-md', 'rounded-lg', 'overflow-hidden');
            table.innerHTML = `
                <thead class="bg-wise-light-gray dark:bg-gray-700">
                    <tr>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-wise-gray dark:text-wise-dark-text-secondary uppercase tracking-wider">Warehouse</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-wise-gray dark:text-wise-dark-text-secondary uppercase tracking-wider">Description</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-wise-gray dark:text-wise-dark-text-secondary uppercase tracking-wider">Active</th>
                        <th scope="col" class="relative px-6 py-3">
                            <span class="sr-only">Actions</span>
                        </th>
                    </tr>
                </thead>
                <tbody class="bg-white dark:bg-gray-800 divide-y divide-wise-border dark:divide-wise-dark-border" id="warehouse-table-body">
                    </tbody>
            `;
            container.appendChild(table);

            const tbody = document.getElementById('warehouse-table-body');
            filteredWarehouses.forEach(wh => {
                const row = tbody.insertRow();
                row.classList.add('hover:bg-wise-light-gray', 'dark:hover:bg-gray-700', 'transition-colors', 'duration-150');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">${wh.id}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-wise-gray dark:text-wise-dark-text-secondary">${wh.description}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-wise-gray dark:text-wise-dark-text-secondary">${wh.active ? 'Yes' : 'No'}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button onclick="showWarehouseForm('edit', '${wh.id}')" class="text-wise-blue-500 hover:text-wise-blue-700 dark:text-wise-blue-400 dark:hover:text-wise-blue-600 mr-3">Edit</button>
                        <button onclick="deleteWarehouse('${wh.id}')" class="text-wise-red-500 hover:text-wise-red-700 dark:text-wise-red-400 dark:hover:text-wise-red-600">Delete</button>
                    </td>
                `;
            });
        }

        function showWarehouseForm(mode, id = null) {
            const modal = document.getElementById('warehouse-form-modal');
            const title = document.getElementById('warehouse-form-title');
            const form = document.getElementById('warehouse-form');
            form.reset(); // Reset form fields

            // Reset tab styles and activate first tab
            const tabButtons = form.querySelectorAll('.tab-button');
            tabButtons.forEach(btn => btn.classList.remove('active-tab', 'border-wise-blue-500', 'text-wise-blue-500', 'dark:border-wise-blue-400', 'dark:text-wise-blue-400'));
            const firstTabButton = tabButtons[0];
            if (firstTabButton) {
                firstTabButton.classList.add('active-tab', 'border-wise-blue-500', 'text-wise-blue-500', 'dark:border-wise-blue-400', 'dark:text-wise-blue-400');
            }
            const tabContents = form.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.add('hidden'));
            document.getElementById('warehouse-address').classList.remove('hidden');

            document.getElementById('same-as-warehouse-address-return').checked = false;
            toggleReturnAddressFields(); // Ensure return address fields are enabled by default

            currentWarehouseId = id; // Set current ID for editing

            if (mode === 'create') {
                title.textContent = 'Buat Gudang Baru';
                document.getElementById('warehouse-submit-button').textContent = 'Buat';
                document.getElementById('warehouse-name').disabled = false; // Enable ID for creation
                document.getElementById('warehouse-inactive').checked = false; // Default new to active
                renderUserCheckboxes([]); // Render all users for new warehouse
            } else { // mode === 'edit'
                title.textContent = 'Edit Gudang';
                document.getElementById('warehouse-submit-button').textContent = 'Simpan Perubahan';
                document.getElementById('warehouse-name').disabled = true; // Disable ID when editing

                const warehouseToEdit = warehouses.find(wh => wh.id === id);
                if (warehouseToEdit) {
                    // Populate main fields
                    document.getElementById('warehouse-name').value = warehouseToEdit.id;
                    document.getElementById('warehouse-description').value = warehouseToEdit.description;
                    document.getElementById('warehouse-inactive').checked = !warehouseToEdit.active;

                    // Populate Warehouse Address tab
                    document.getElementById('address1').value = warehouseToEdit.address1;
                    document.getElementById('address2').value = warehouseToEdit.address2;
                    document.getElementById('address3').value = warehouseToEdit.address3;
                    document.getElementById('city').value = warehouseToEdit.city;
                    document.getElementById('state').value = warehouseToEdit.state;
                    document.getElementById('postal-code').value = warehouseToEdit.postalCode;
                    document.getElementById('country').value = warehouseToEdit.country;
                    document.getElementById('fax-number').value = warehouseToEdit.faxNumber;
                    document.getElementById('attention-to').value = warehouseToEdit.attentionTo;
                    document.getElementById('phone-number').value = warehouseToEdit.phoneNumber;
                    document.getElementById('email-address').value = warehouseToEdit.emailAddress;
                    document.getElementById('ucc-ean-number').value = warehouseToEdit.uccEanNumber;

                    // Populate Returns Address tab
                    document.getElementById('same-as-warehouse-address-return').checked = warehouseToEdit.returnAddressSame;
                    toggleReturnAddressFields(); // Adjust fields based on checkbox
                    document.getElementById('return-name').value = warehouseToEdit.returnName;
                    document.getElementById('return-address1').value = warehouseToEdit.returnAddress1;
                    document.getElementById('return-address2').value = warehouseToEdit.returnAddress2;
                    document.getElementById('return-address3').value = warehouseToEdit.returnAddress3;
                    document.getElementById('return-city').value = warehouseToEdit.returnCity;
                    document.getElementById('return-state').value = warehouseToEdit.returnState;
                    document.getElementById('return-postal-code').value = warehouseToEdit.returnPostalCode;
                    document.getElementById('return-country').value = warehouseToEdit.returnCountry;
                    document.getElementById('return-fax-number').value = warehouseToEdit.returnFaxNumber;
                    document.getElementById('return-attention-to').value = warehouseToEdit.returnAttentionTo;
                    document.getElementById('return-phone-number').value = warehouseToEdit.returnPhoneNumber;
                    document.getElementById('return-email-address').value = warehouseToEdit.returnEmailAddress;
                    document.getElementById('return-ucc-ean-number').value = warehouseToEdit.returnUccEanNumber;

                    // Populate Miscellaneous tab
                    document.getElementById('slotting-move-file-directory').value = warehouseToEdit.slottingMoveFileDirectory;
                    document.getElementById('default-location-for-unslotted-items').value = warehouseToEdit.defaultLocationForUnslottedItems;
                    document.getElementById('rendered-document-pdf-file-directory').value = warehouseToEdit.renderedDocumentPdfFileDirectory;

                    // Populate User Defined Data tab
                    document.getElementById('user-defined-field1').value = warehouseToEdit.userDefinedField1;
                    document.getElementById('user-defined-field2').value = warehouseToEdit.userDefinedField2;
                    document.getElementById('user-defined-field3').value = warehouseToEdit.userDefinedField3;
                    document.getElementById('user-defined-field4').value = warehouseToEdit.userDefinedField4;
                    document.getElementById('user-defined-field5').value = warehouseToEdit.userDefinedField5;
                    document.getElementById('user-defined-field6').value = warehouseToEdit.userDefinedField6;
                    document.getElementById('user-defined-field7').value = warehouseToEdit.userDefinedField7;
                    document.getElementById('user-defined-field8').value = warehouseToEdit.userDefinedField8;

                    renderUserCheckboxes(warehouseToEdit.users || []); // Render users and check selected ones
                }
            }
            modal.classList.remove('hidden');
            modal.classList.add('flex'); // Display as flex to center content
        }

        function closeWarehouseForm() {
            document.getElementById('warehouse-form-modal').classList.add('hidden');
            document.getElementById('warehouse-form-modal').classList.remove('flex');
            currentWarehouseId = null;
        }

        function handleWarehouseSubmit(event) {
            event.preventDefault();
            const form = event.target;
            const warehouseId = document.getElementById('warehouse-name').value;
            const description = document.getElementById('warehouse-description').value;
            const inactive = document.getElementById('warehouse-inactive').checked;
            const active = !inactive;

            // Collect address data
            const address1 = document.getElementById('address1').value;
            const address2 = document.getElementById('address2').value;
            const address3 = document.getElementById('address3').value;
            const city = document.getElementById('city').value;
            const state = document.getElementById('state').value;
            const postalCode = document.getElementById('postal-code').value;
            const country = document.getElementById('country').value;
            const faxNumber = document.getElementById('fax-number').value;
            const attentionTo = document.getElementById('attention-to').value;
            const phoneNumber = document.getElementById('phone-number').value;
            const emailAddress = document.getElementById('email-address').value;
            const uccEanNumber = document.getElementById('ucc-ean-number').value;

            // Collect returns address data
            const returnAddressSame = document.getElementById('same-as-warehouse-address-return').checked;
            const returnName = document.getElementById('return-name').value;
            const returnAddress1 = document.getElementById('return-address1').value;
            const returnAddress2 = document.getElementById('return-address2').value;
            const returnAddress3 = document.getElementById('return-address3').value;
            const returnCity = document.getElementById('return-city').value;
            const returnState = document.getElementById('return-state').value;
            const returnPostalCode = document.getElementById('return-postal-code').value;
            const returnCountry = document.getElementById('return-country').value;
            const returnFaxNumber = document.getElementById('return-fax-number').value;
            const returnAttentionTo = document.getElementById('return-attention-to').value;
            const returnPhoneNumber = document.getElementById('return-phone-number').value;
            const returnEmailAddress = document.getElementById('return-email-address').value;
            const returnUccEanNumber = document.getElementById('return-ucc-ean-number').value;

            // Collect miscellaneous data
            const slottingMoveFileDirectory = document.getElementById('slotting-move-file-directory').value;
            const defaultLocationForUnslottedItems = document.getElementById('default-location-for-unslotted-items').value;
            const renderedDocumentPdfFileDirectory = document.getElementById('rendered-document-pdf-file-directory').value;

            // Collect user defined data
            const userDefinedField1 = document.getElementById('user-defined-field1').value;
            const userDefinedField2 = document.getElementById('user-defined-field2').value;
            const userDefinedField3 = document.getElementById('user-defined-field3').value;
            const userDefinedField4 = document.getElementById('user-defined-field4').value;
            const userDefinedField5 = document.getElementById('user-defined-field5').value;
            const userDefinedField6 = document.getElementById('user-defined-field6').value;
            const userDefinedField7 = document.getElementById('user-defined-field7').value;
            const userDefinedField8 = document.getElementById('user-defined-field8').value;

            // Collect selected users
            const selectedUsers = Array.from(document.querySelectorAll('#user-checkbox-list input[type="checkbox"]:checked'))
                                       .map(checkbox => checkbox.value);

            const newWarehouse = {
                id: warehouseId,
                description,
                active,
                address1, address2, address3, city, state, postalCode, country, faxNumber, attentionTo, phoneNumber, emailAddress, uccEanNumber,
                returnAddressSame, returnName, returnAddress1, returnAddress2, returnAddress3, returnCity, returnState, returnPostalCode, returnCountry, returnFaxNumber, returnAttentionTo, returnPhoneNumber, returnEmailAddress, returnUccEanNumber,
                slottingMoveFileDirectory, defaultLocationForUnslottedItems, renderedDocumentPdfFileDirectory,
                userDefinedField1, userDefinedField2, userDefinedField3, userDefinedField4, userDefinedField5, userDefinedField6, userDefinedField7, userDefinedField8,
                users: selectedUsers,
            };

            if (currentWarehouseId) {
                // Update existing warehouse
                const index = warehouses.findIndex(wh => wh.id === currentWarehouseId);
                if (index !== -1) {
                    warehouses[index] = { ...warehouses[index], ...newWarehouse }; // Merge existing with new
                }
            } else {
                // Add new warehouse
                if (warehouses.some(wh => wh.id === warehouseId)) {
                    alert('Warehouse ID already exists!');
                    return;
                }
                warehouses.push(newWarehouse);
            }
            saveWarehouses();
            renderWarehouseList();
            closeWarehouseForm();
        }

        function deleteWarehouse(id) {
            if (confirm(`Are you sure you want to delete warehouse ${id}?`)) {
                warehouses = warehouses.filter(wh => wh.id !== id);
                saveWarehouses();
                renderWarehouseList();
            }
        }

        function filterWarehouseList(query) {
            renderWarehouseList(query);
        }

        function toggleReturnAddressFields() {
            const sameAsCheckbox = document.getElementById('same-as-warehouse-address-return');
            const returnAddressFields = document.getElementById('return-address-fields');
            const fields = returnAddressFields.querySelectorAll('input, select');

            if (sameAsCheckbox.checked) {
                returnAddressFields.classList.add('hidden');
                fields.forEach(field => field.disabled = true);
            } else {
                returnAddressFields.classList.remove('hidden');
                fields.forEach(field => field.disabled = false);
            }
        }

        function renderUserCheckboxes(selectedUsers) {
            const userListContainer = document.getElementById('user-checkbox-list');
            userListContainer.innerHTML = ''; // Clear existing checkboxes

            allUsers.forEach(user => {
                const isChecked = selectedUsers.includes(user);
                const div = document.createElement('div');
                div.classList.add('flex', 'items-center');
                div.innerHTML = `
                    <input type="checkbox" id="user-${user}" value="${user}" class="form-checkbox h-4 w-4 text-wise-blue-500 rounded border-wise-border dark:border-wise-dark-border focus:ring-wise-blue-500" ${isChecked ? 'checked' : ''}>
                    <label for="user-${user}" class="ml-2 text-sm text-wise-dark-gray dark:text-wise-dark-text-primary">${user}</label>
                `;
                userListContainer.appendChild(div);
            });
            document.getElementById('check-all-users').checked = (selectedUsers.length === allUsers.length && allUsers.length > 0);
        }

        function toggleAllUsers() {
            const checkAllCheckbox = document.getElementById('check-all-users');
            const userCheckboxes = document.querySelectorAll('#user-checkbox-list input[type="checkbox"]');
            userCheckboxes.forEach(checkbox => {
                checkbox.checked = checkAllCheckbox.checked;
            });
        }


        // --- Zone CRUD ---
        function renderZoneList(filterQuery = '') {
            const container = document.getElementById('zone-list-container');
            container.innerHTML = ''; // Clear existing list

            const filteredZones = zones.filter(zone =>
                zone.identifier.toLowerCase().includes(filterQuery.toLowerCase()) ||
                zone.description.toLowerCase().includes(filterQuery.toLowerCase())
            );

            if (filteredZones.length === 0) {
                container.innerHTML = `<p class="text-wise-gray dark:text-wise-dark-text-secondary mt-4">Tidak ada zona ditemukan.</p>`;
                return;
            }

            const table = document.createElement('table');
            table.classList.add('min-w-full', 'divide-y', 'divide-wise-border', 'dark:divide-wise-dark-border', 'mt-4', 'shadow-md', 'rounded-lg', 'overflow-hidden');
            table.innerHTML = `
                <thead class="bg-wise-light-gray dark:bg-gray-700">
                    <tr>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-wise-gray dark:text-wise-dark-text-secondary uppercase tracking-wider">Identifier</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-wise-gray dark:text-wise-dark-text-secondary uppercase tracking-wider">Description</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-wise-gray dark:text-wise-dark-text-secondary uppercase tracking-wider">System created</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-wise-gray dark:text-wise-dark-text-secondary uppercase tracking-wider">Active</th>
                        <th scope="col" class="relative px-6 py-3">
                            <span class="sr-only">Actions</span>
                        </th>
                    </tr>
                </thead>
                <tbody class="bg-white dark:bg-gray-800 divide-y divide-wise-border dark:divide-wise-dark-border" id="zone-table-body">
                    </tbody>
            `;
            container.appendChild(table);

            const tbody = document.getElementById('zone-table-body');
            filteredZones.forEach(zone => {
                const row = tbody.insertRow();
                row.classList.add('hover:bg-wise-light-gray', 'dark:hover:bg-gray-700', 'transition-colors', 'duration-150');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">${zone.identifier}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-wise-gray dark:text-wise-dark-text-secondary">${zone.description}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-wise-gray dark:text-wise-dark-text-secondary">${zone.systemCreated ? 'Yes' : 'No'}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-wise-gray dark:text-wise-dark-text-secondary">${zone.active ? 'Yes' : 'No'}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button onclick="showZoneForm('edit', '${zone.id}')" class="text-wise-blue-500 hover:text-wise-blue-700 dark:text-wise-blue-400 dark:hover:text-wise-blue-600 mr-3">Edit</button>
                        <button onclick="deleteZone('${zone.id}')" class="text-wise-red-500 hover:text-wise-red-700 dark:text-wise-red-400 dark:hover:text-wise-red-600">Delete</button>
                    </td>
                `;
            });
        }

        function showZoneForm(mode, id = null) {
            const modal = document.getElementById('zone-form-modal');
            const title = document.getElementById('zone-form-title');
            const form = document.getElementById('zone-form');
            form.reset(); 
            currentZoneId = id;

            if (mode === 'create') {
    title.textContent = 'Buat Zona Baru';
    document.getElementById('zone-submit-button').textContent = 'Buat';
    document.getElementById('zone-identifier').disabled = false;
    document.getElementById('zone-inactive').checked = false;
    document.getElementById('zone-system-created').checked = false; // New zones are not system created by default
} else { // mode === 'edit'
    title.textContent = 'Edit Zona';
    document.getElementById('zone-submit-button').textContent = 'Simpan Perubahan';
    document.getElementById('zone-identifier').disabled = true; // Identifier is usually not editable for existing records

                const zoneToEdit = zones.find(z => z.id === id);
                if (zoneToEdit) {
                    document.getElementById('zone-identifier').value = zoneToEdit.identifier;
                    document.getElementById('zone-record-type').value = zoneToEdit.recordType;
                    document.getElementById('zone-description').value = zoneToEdit.description;
                    document.getElementById('zone-inactive').checked = !zoneToEdit.active;
                    document.getElementById('zone-system-created').checked = zoneToEdit.systemCreated;
                }
            }
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeZoneForm() {
            document.getElementById('zone-form-modal').classList.add('hidden');
            document.getElementById('zone-form-modal').classList.remove('flex');
            currentZoneId = null;
        }

        function handleZoneSubmit(event) {
            event.preventDefault();
            const form = event.target;
            const identifier = document.getElementById('zone-identifier').value;
            const recordType = document.getElementById('zone-record-type').value;
            const description = document.getElementById('zone-description').value;
            const inactive = document.getElementById('zone-inactive').checked;
            const active = !inactive;
            const systemCreated = document.getElementById('zone-system-created').checked; // Value from UI, though it's disabled for edit

            const newZone = {
                id: currentZoneId || identifier, // Use existing ID or new identifier as ID
                identifier,
                recordType,
                description,
                systemValue1: systemCreated ? 'Yes' : 'No', // Assuming System value 1 is tied to system created
                systemCreated,
                active,
            };

            if (currentZoneId) {
                // Update existing zone
                const index = zones.findIndex(z => z.id === currentZoneId);
                if (index !== -1) {
                    zones[index] = { ...zones[index], ...newZone };
                }
            } else {
                // Add new zone
                if (zones.some(z => z.identifier === identifier)) {
                    alert('Zone Identifier already exists!');
                    return;
                }
                newZone.id = identifier; // For new zones, ID is the identifier
                zones.push(newZone);
            }
            saveZones();
            renderZoneList();
            closeZoneForm();
        }

        function deleteZone(id) {
            if (confirm(`Are you sure you want to delete zone ${id}?`)) {
                zones = zones.filter(z => z.id !== id);
                saveZones();
                renderZoneList();
            }
        }

        function filterZoneList(query) {
            renderZoneList(query);
        }

        // --- Location Type CRUD ---
        function renderLocationTypeList(filterQuery = '') {
            const container = document.getElementById('location-type-list-container');
            container.innerHTML = ''; // Clear existing list

            const filteredLocationTypes = locationTypes.filter(lt =>
                lt.locationType.toLowerCase().includes(filterQuery.toLowerCase())
            );

            if (filteredLocationTypes.length === 0) {
                container.innerHTML = `<p class="text-wise-gray dark:text-wise-dark-text-secondary mt-4">Tidak ada tipe lokasi ditemukan.</p>`;
                return;
            }

            const table = document.createElement('table');
            table.classList.add('min-w-full', 'divide-y', 'divide-wise-border', 'dark:divide-wise-dark-border', 'mt-4', 'shadow-md', 'rounded-lg', 'overflow-hidden');
            table.innerHTML = `
                <thead class="bg-wise-light-gray dark:bg-gray-700">
                    <tr>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-wise-gray dark:text-wise-dark-text-secondary uppercase tracking-wider">Location type</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-wise-gray dark:text-wise-dark-text-secondary uppercase tracking-wider">Length</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-wise-gray dark:text-wise-dark-text-secondary uppercase tracking-wider">Width</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-wise-gray dark:text-wise-dark-text-secondary uppercase tracking-wider">Height</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-wise-gray dark:text-wise-dark-text-secondary uppercase tracking-wider">Dimension um</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-wise-gray dark:text-wise-dark-text-secondary uppercase tracking-wider">Maximum weight</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-wise-gray dark:text-wise-dark-text-secondary uppercase tracking-wider">Weight um</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-wise-gray dark:text-wise-dark-text-secondary uppercase tracking-wider">Active</th>
                        <th scope="col" class="relative px-6 py-3">
                            <span class="sr-only">Actions</span>
                        </th>
                    </tr>
                </thead>
                <tbody class="bg-white dark:bg-gray-800 divide-y divide-wise-border dark:divide-wise-dark-border" id="location-type-table-body">
                    </tbody>
            `;
            container.appendChild(table);

            const tbody = document.getElementById('location-type-table-body');
            filteredLocationTypes.forEach(lt => {
                const row = tbody.insertRow();
                row.classList.add('hover:bg-wise-light-gray', 'dark:hover:bg-gray-700', 'transition-colors', 'duration-150');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-wise-dark-gray dark:text-wise-dark-text-primary">${lt.locationType}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-wise-gray dark:text-wise-dark-text-secondary">${lt.length.toFixed(2)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-wise-gray dark:text-wise-dark-text-secondary">${lt.width.toFixed(2)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-wise-gray dark:text-wise-dark-text-secondary">${lt.height.toFixed(2)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-wise-gray dark:text-wise-dark-text-secondary">${lt.dimensionUM}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-wise-gray dark:text-wise-dark-text-secondary">${lt.maximumWeight.toFixed(2)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-wise-gray dark:text-wise-dark-text-secondary">${lt.weightUM}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-wise-gray dark:text-wise-dark-text-secondary">${lt.active ? 'Yes' : 'No'}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button onclick="showLocationTypeForm('edit', '${lt.id}')" class="text-wise-blue-500 hover:text-wise-blue-700 dark:text-wise-blue-400 dark:hover:text-wise-blue-600 mr-3">Edit</button>
                        <button onclick="deleteLocationType('${lt.id}')" class="text-wise-red-500 hover:text-wise-red-700 dark:text-wise-red-400 dark:hover:text-wise-red-600">Delete</button>
                    </td>
                `;
            });
        }

        function showLocationTypeForm(mode, id = null) {
            const modal = document.getElementById('location-type-form-modal');
            const title = document.getElementById('location-type-form-title');
            const form = document.getElementById('location-type-form');
            form.reset();
            
            // Reset tab styles and activate first tab
            const tabButtons = form.querySelectorAll('.tab-button');
            tabButtons.forEach(btn => btn.classList.remove('active-tab', 'border-wise-blue-500', 'text-wise-blue-500', 'dark:border-wise-blue-400', 'dark:text-wise-blue-400'));
            const firstTabButton = tabButtons[0];
            if (firstTabButton) {
                firstTabButton.classList.add('active-tab', 'border-wise-blue-500', 'text-wise-blue-500', 'dark:border-wise-blue-400', 'dark:text-wise-blue-400');
            }
            const tabContents = form.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.add('hidden'));
            document.getElementById('general-location').classList.remove('hidden');


            currentLocationTypeId = id;

            if (mode === 'create') {
                title.textContent = 'Buat Tipe Lokasi Baru';
                document.getElementById('location-type-submit-button').textContent = 'Buat';
                document.getElementById('location-type-name').disabled = false;
                document.getElementById('location-type-inactive').checked = false; // Default new to active
            } else { // mode === 'edit'
                title.textContent = 'Edit Tipe Lokasi';
                document.getElementById('location-type-submit-button').textContent = 'Simpan Perubahan';
                document.getElementById('location-type-name').disabled = true; // Location Type is usually not editable for existing records

                const locationTypeToEdit = locationTypes.find(lt => lt.id === id);
                if (locationTypeToEdit) {
                    document.getElementById('location-type-name').value = locationTypeToEdit.locationType;
                    document.getElementById('location-type-length').value = locationTypeToEdit.length;
                    document.getElementById('location-type-width').value = locationTypeToEdit.width;
                    document.getElementById('location-type-height').value = locationTypeToEdit.height;
                    document.getElementById('location-type-length-um').value = locationTypeToEdit.dimensionUM;
                    document.getElementById('location-type-maximum-weight').value = locationTypeToEdit.maximumWeight;
                    document.getElementById('location-type-weight-um').value = locationTypeToEdit.weightUM;
                    document.getElementById('location-type-inactive').checked = !locationTypeToEdit.active;
                }
            }
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeLocationTypeForm() {
            document.getElementById('location-type-form-modal').classList.add('hidden');
            document.getElementById('location-type-form-modal').classList.remove('flex');
            currentLocationTypeId = null;
        }

        function handleLocationTypeSubmit(event) {
            event.preventDefault();
            const form = event.target;
            const locationTypeName = document.getElementById('location-type-name').value;
            const length = parseFloat(document.getElementById('location-type-length').value) || 0;
            const width = parseFloat(document.getElementById('location-type-width').value) || 0;
            const height = parseFloat(document.getElementById('location-type-height').value) || 0;
            const dimensionUM = document.getElementById('location-type-length-um').value;
            const maximumWeight = parseFloat(document.getElementById('location-type-maximum-weight').value) || 0;
            const weightUM = document.getElementById('location-type-weight-um').value;
            const inactive = document.getElementById('location-type-inactive').checked;
            const active = !inactive;

            const newLocationType = {
                id: currentLocationTypeId || locationTypeName, // Use existing ID or new name as ID
                locationType: locationTypeName,
                length,
                width,
                height,
                dimensionUM,
                maximumWeight,
                weightUM,
                active,
                lastUpdated: `Now User: ${document.getElementById('username-display').textContent}`
            };

            if (currentLocationTypeId) {
                // Update existing location type
                const index = locationTypes.findIndex(lt => lt.id === currentLocationTypeId);
                if (index !== -1) {
                    locationTypes[index] = { ...locationTypes[index], ...newLocationType };
                }
            } else {
                // Add new location type
                if (locationTypes.some(lt => lt.locationType === locationTypeName)) {
                    alert('Location Type name already exists!');
                    return;
                }
                newLocationType.id = locationTypeName; // For new location types, ID is the name
                locationTypes.push(newLocationType);
            }
            saveLocationTypes();
            renderLocationTypeList();
            closeLocationTypeForm();
        }

        function deleteLocationType(id) {
            if (confirm(`Are you sure you want to delete location type ${id}?`)) {
                locationTypes = locationTypes.filter(lt => lt.id !== id);
                saveLocationTypes();
                renderLocationTypeList();
            }
        }

        function filterLocationTypeList(query) {
            renderLocationTypeList(query);
        }

        // --- Tab functionality for forms ---
        function initializeTabButtons(modalId) {
            const modal = document.getElementById(modalId);
            if (!modal) return;

            const tabButtons = modal.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.onclick = () => {
                    const tabId = button.dataset.tab;
                    activateTab(tabId, modalId);
                };
            });
        }

        function activateTab(tabId, modalId = null) {
            const parentElement = modalId ? document.getElementById(modalId) : document;
            
            parentElement.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            parentElement.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active-tab', 'border-wise-blue-500', 'text-wise-blue-500', 'dark:border-wise-blue-400', 'dark:text-wise-blue-400');
            });

            document.getElementById(tabId).classList.remove('hidden');
            const activeTabButton = parentElement.querySelector(`.tab-button[data-tab="${tabId}"]`);
            if (activeTabButton) {
                activeTabButton.classList.add('active-tab', 'border-wise-blue-500', 'text-wise-blue-500', 'dark:border-wise-blue-400', 'dark:text-wise-blue-400');
            }
        }

        // Inisialisasi dashboard saat dimuat
        window.onload = function() {
            selectCategory('dashboard');
            
            // Atur nama pengguna (contoh, bisa dinamis)
            const username = "SuperAdmin"; 
            document.getElementById('username-display').textContent = username;

            // Terapkan tema yang disimpan saat dimuat
            const savedTheme = localStorage.getItem('theme');
            const htmlElement = document.documentElement;
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');

            if (savedTheme === 'dark') {
                htmlElement.classList.add('dark');
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            } else {
                htmlElement.classList.remove('dark'); // Pastikan kelas 'dark' dihapus jika tema bukan gelap
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            }

            // Sesuaikan margin konten utama berdasarkan visibilitas sidebar saat ukuran diubah
            window.addEventListener('resize', () => {
                const sidebar = document.getElementById('sidebar');
                const mainContentArea = document.querySelector('.flex-1');
                if (window.innerWidth >= 768) {
                    sidebar.classList.remove('-translate-x-full');
                    mainContentArea.classList.add('ml-64');
                    mainContentArea.classList.remove('ml-0');
                } else {
                    sidebar.classList.add('-translate-x-full');
                    mainContentArea.classList.remove('ml-64');
                    mainContentArea.classList.add('ml-0');
                }
            });
        };
    </script>
</body>
</html>